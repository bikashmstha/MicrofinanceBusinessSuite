/*
 * File: app/controller/RequestKey.js
 *
 * This file was generated by Sencha Architect version 2.2.3.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.RequestKey', {
    extend: 'Ext.app.Controller',

    onBtnSendRequestClick: function(button, e, eOpts) {
        /*
        var to_address = "m4manoz@gmail.com";
        var subject = "Key For Verifying E-Returns";
        var bdy_msg = "Message";
        var mailto_link = 'mailto:'+to_address+'?subject='+subject+'&body='+bdy_msg;
        win = window.open(mailto_link,'emailWindow');
        if (win && win.open &&!win.closed) win.close(); */


        Ext.Ajax.request({
            url: '/Email/EmailHandler.ashx',
            params: {
                id:1
            },
            success: function(p1){
                var fp =Ext.decode(p1.responseText);

                console.log(fp);
                if(fp.success!='True')
                {
                    msg('INFO',fp.message);
                }

            }
        });


    },

    init: function(application) {
        this.control({
            "#btnSendRequest": {
                click: this.onBtnSendRequestClick
            }
        });
    }

});
