/*
 * File: app/controller/Bank.js
 *
 * This file was generated by Sencha Architect version 2.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.Bank', {
    extend: 'Ext.app.Controller',

    stores: [
        'StrBank'
    ],

    onBnkBtnSaveClick: function(button, e, options) {
        var txtBankCode=Ext.ComponentQuery.query('#txtBankCode')[0];
        var txtBankNameEnglish=Ext.ComponentQuery.query('#txtBankNameEnglish')[0];
        var txtBankNameNepali=Ext.ComponentQuery.query('#txtBankNameNepali')[0];
        var txtBankAddressBnk=Ext.ComponentQuery.query('#txtBankAddressBnk')[0];
        var chkStatus=Ext.ComponentQuery.query('#chkStatus')[0];

        var status = "";


        if(status.checked)
        status = true;
        else
        status = false;


        var postData = {
            BankCode:txtBankCode.getValue(),
            BankNameEnglish:txtBankNameEnglish.getValue(),
            BankNameNepali:txtBankNameNepali.getValue(),
            BankAddress:txtBankAddressBnk.getValue(),           
            Status:status
        } ;



        Ext.Ajax.request({
            url: '../Handlers/Common/BankHandler.ashx?method=SaveBank',
            params: {bank:JSON.stringify(postData)},

            success: function ( result, request )
            {

                msg('SUCCESS','Successfully Saved.');


            },
            failure: function ( result, request ) {

                msg("FAILURE","ERROR OCURRED !!!");
            }

        });

    },

    onGrdListOfBanksItemClick: function(dataview, record, item, index, e, options) {
        Ext.ComponentQuery.query('#txtBankCode')[0].setValue(record.data.BankCode);
        Ext.ComponentQuery.query('#txtBankNameNepali')[0].setValue(record.data.BankNameNepali);
        Ext.ComponentQuery.query('#txtBankNameEnglish')[0].setValue(record.data.BankNameEnglish);
        Ext.ComponentQuery.query('#txtBankAddressBnk')[0].setValue(record.data.BankAddress);
    },

    init: function(application) {
        this.control({
            "#bnkBtnSave": {
                click: this.onBnkBtnSaveClick
            },
            "#grdListOfBanks": {
                itemclick: this.onGrdListOfBanksItemClick
            }
        });
    }

});
