/*
 * File: app/view/SetAnnexD03.js
 *
 * This file was generated by Sencha Architect version 2.2.3.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.SetAnnexD03', {
    extend: 'Ext.panel.Panel',

    frame: true,
    itemId: 'pnlSetAnnexD03',
    width: 860,
    autoScroll: true,
    title: 'Set Annex',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    frame: true,
                    height: 550,
                    itemId: 'frmSetAnnexD03',
                    margin: 5,
                    bodyPadding: '10 10 5 10',
                    items: [
                        {
                            xtype: 'container',
                            itemId: 'cntAnnexRulesSax',
                            margin: '0 0 10 10',
                            layout: {
                                columns: 1,
                                type: 'table'
                            },
                            items: [
                                {
                                    xtype: 'label',
                                    margin: '0 0 5 0',
                                    padding: '5 0',
                                    text: '•   अनुसूचीहरु तल दिएको क्रम अनुसार भर्नु पर्नेछ ।  '
                                },
                                {
                                    xtype: 'label',
                                    padding: '5 0',
                                    text: '•  अनुसूची - १ र अनुसूची - २ स्वत: भरिन्छ , छुट र शुल्कहरु मात्र भर्नुपर्छ । '
                                },
                                {
                                    xtype: 'label',
                                    padding: '5 0',
                                    text: '•  निकायले अनिवार्य कागजातहरु upload अनिवार्य गर्नुपर्नेछ । '
                                },
                                {
                                    xtype: 'label',
                                    height: 24,
                                    padding: '5 0',
                                    text: '•  आँफै भरिएको अनुसुची १ र अनुसुची २ हेरी ठीक छ भने Set Annex Button क्लिक गर्नु होला ।'
                                },
                                {
                                    xtype: 'container',
                                    layout: {
                                        type: 'table'
                                    },
                                    items: [
                                        {
                                            xtype: 'button',
                                            height: 25,
                                            itemId: 'btnSubmitSax',
                                            iconCls: 'icon-ok',
                                            text: 'Finalized Submit'
                                        },
                                        {
                                            xtype: 'displayfield',
                                            itemId: 'lblFinalStatus',
                                            margin: '0 0 0 5',
                                            fieldLabel: '',
                                            labelStyle: '',
                                            value: 'Display Field',
                                            fieldStyle: 'font-weight:bold;color:red;font-size:12px'
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    height: 170,
                                    margin: '5 0',
                                    title: '१. आय अनुसूची भर्ने ब्लक ',
                                    dockedItems: [
                                        {
                                            xtype: 'toolbar',
                                            dock: 'top',
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    text: 'अन्य अनिवार्य कागजातहरु upload गर्न को लागि     '
                                                },
                                                {
                                                    xtype: 'label',
                                                    itemId: 'lblDocUpdSax',
                                                    style: 'color:red;\r\ntext-decoration:underline;\r\ncursor:pointer;',
                                                    text: '  यहाँ क्लिक   ',
                                                    listeners: {
                                                        render: {
                                                            fn: me.onLblDocUpdSaxRender,
                                                            scope: me
                                                        }
                                                    }
                                                },
                                                {
                                                    xtype: 'label',
                                                    text: '  गर्नुहोस् । '
                                                }
                                            ]
                                        }
                                    ],
                                    items: [
                                        {
                                            xtype: 'gridpanel',
                                            height: 137,
                                            itemId: 'grdAnnexGroup1Sax',
                                            autoScroll: true,
                                            hideHeaders: true,
                                            scroll: 'horizontal',
                                            store: 'AnnexGroup1',
                                            viewConfig: {
                                                width: 1500
                                            },
                                            columns: [
                                                {
                                                    xtype: 'gridcolumn',
                                                    dataIndex: 'AnnexName',
                                                    text: 'AnnexName'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    width: 400,
                                                    dataIndex: 'AnnexDesc',
                                                    text: 'AnnexDesc'
                                                },
                                                {
                                                    xtype: 'actioncolumn',
                                                    items: [
                                                        {
                                                            handler: function(view, rowIndex, colIndex, item, e) {
                                                                var obj = Ext.ComponentQuery.query('#pnlSetAnnexD03')[0];

                                                                var wait = waitMsg("Loading ...");
                                                                var store = Ext.getStore('AnnexGroup1');
                                                                var row = store.getAt(rowIndex).data;

                                                                var ID = row.AnnexID;
                                                                var annex = "D03Annex"+ ID;
                                                                var annexTitle = "Annex-"  + ID;

                                                                var uiConfig = {menuLink:annex,pageTitle:annexTitle};

                                                                var arg = obj.extraParam;


                                                                //DynamicUI(uiConfig,null,arg);

                                                                //--------------------------------------
                                                                // NB: Finalized Case
                                                                //--------------------------------------
                                                                if(arg.recStatus === "F")
                                                                {
                                                                    msg("WARNING","Already Finalized , So no new data can be added !!!");
                                                                    return;
                                                                }


                                                                if(ID > 5)
                                                                {

                                                                    var bus = MyApp.app.getController('SetAnnexD03').getAnnexValue(ID,1);   


                                                                    if(bus === null)
                                                                    {   
                                                                        wait.hide();
                                                                        DynamicUI(uiConfig,null,arg);
                                                                    }
                                                                    else
                                                                    {
                                                                        var errMsg = "For Anx 6 to 8 only Single Business is allowed !!!";
                                                                        wait.hide();
                                                                        msg("WARNING",errMsg);        
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    wait.hide();

                                                                    //--------------------------------------
                                                                    // NB: New Case
                                                                    //--------------------------------------

                                                                    if(arg.from === "MV")
                                                                    {
                                                                        Ext.getCmp("PopupWindow").close();
                                                                        dynamicPopUp(annex,arg);        
                                                                        Ext.getCmp("PopupWindow").setWidth(1140);
                                                                    }
                                                                    else
                                                                    {
                                                                        DynamicUI(uiConfig,null,arg);
                                                                    }
                                                                }

                                                            },
                                                            icon: '../ITS/resources/images/icons/edit_add.png',
                                                            iconCls: 'iconMargin',
                                                            tooltip: 'Add New'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    itemId: 'business1Grp1D03',
                                                    margin: '0 1',
                                                    width: 70,
                                                    text: 'MyColumn714'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    itemId: 'business2Grp1D03',
                                                    margin: '0 1',
                                                    width: 70,
                                                    text: 'MyColumn714'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    itemId: 'business3Grp1D03',
                                                    margin: '0 1',
                                                    width: 70,
                                                    text: 'MyColumn714'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    itemId: 'business4Grp1D03',
                                                    margin: '0 1',
                                                    width: 70,
                                                    text: 'MyColumn526'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    itemId: 'business5Grp1D03',
                                                    margin: '0 1',
                                                    width: 70,
                                                    text: 'MyColumn527'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    itemId: 'business6Grp1D03',
                                                    margin: '0 1',
                                                    width: 70,
                                                    text: 'MyColumn527'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    hidden: true,
                                                    width: 20,
                                                    defaultWidth: 20,
                                                    dataIndex: 'AnnexID',
                                                    text: 'AnnexID'
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    height: 60,
                                    margin: '0 0 5 0',
                                    title: '२. अनुसूची १ वा अनूसूची २',
                                    items: [
                                        {
                                            xtype: 'gridpanel',
                                            itemId: 'grdAnnexGroup0Sax',
                                            hideHeaders: true,
                                            store: 'AnnexGroup0',
                                            viewConfig: {
                                                height: 87
                                            },
                                            columns: [
                                                {
                                                    xtype: 'gridcolumn',
                                                    dataIndex: 'AnnexName',
                                                    text: 'AnnexName'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    width: 400,
                                                    dataIndex: 'AnnexDesc',
                                                    text: 'AnnexDesc'
                                                },
                                                {
                                                    xtype: 'actioncolumn',
                                                    items: [
                                                        {
                                                            handler: function(view, rowIndex, colIndex, item, e) {
                                                                var obj = Ext.ComponentQuery.query('#pnlSetAnnexD03')[0];

                                                                var store = Ext.getStore('AnnexGroup0');
                                                                var row = store.getAt(rowIndex).data;

                                                                var ID = row.AnnexID;

                                                                var annex = "D03Annex"+ ID;
                                                                var annexTitle = "Annex-"  + ID;

                                                                var uiConfig = {menuLink:annex,pageTitle:annexTitle};

                                                                var arg = obj.extraParam;

                                                                var action = MyApp.app.getController('SetAnnexD03').getAnnexValue(ID);

                                                                arg.action = action?action:"";

                                                                //DynamicUI(uiConfig,null,arg);

                                                                //--------------------------------------
                                                                // NB: Finalized Case
                                                                //--------------------------------------

                                                                if(arg.recStatus === "F" && row.AnnexState !== "Update")
                                                                {
                                                                    msg("WARNING","Already Finalized , So no new data can be added !!!");
                                                                    return;
                                                                }


                                                                //--------------------------------------
                                                                // NB: New Case
                                                                //--------------------------------------

                                                                if(arg.from === "MV")
                                                                {
                                                                    Ext.getCmp("PopupWindow").close();
                                                                    dynamicPopUp(annex,arg);    
                                                                    Ext.getCmp("PopupWindow").setWidth(1140);
                                                                }
                                                                else
                                                                {
                                                                    DynamicUI(uiConfig,null,arg);
                                                                }
                                                            },
                                                            icon: '../ITS/resources/images/icons/filesave.png',
                                                            iconCls: 'iconMargin',
                                                            tooltip: 'Submit'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    text: 'MyColumn519'
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    margin: '0 0 5 0',
                                    title: '३. करदाबी अनुसूची',
                                    items: [
                                        {
                                            xtype: 'gridpanel',
                                            itemId: 'grdAnnexGroup2Sax',
                                            hideHeaders: true,
                                            store: 'AnnexGroup2',
                                            viewConfig: {
                                                height: 87
                                            },
                                            columns: [
                                                {
                                                    xtype: 'gridcolumn',
                                                    dataIndex: 'AnnexName',
                                                    text: 'AnnexName'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    width: 400,
                                                    dataIndex: 'AnnexDesc',
                                                    text: 'AnnexDesc'
                                                },
                                                {
                                                    xtype: 'actioncolumn',
                                                    items: [
                                                        {
                                                            handler: function(view, rowIndex, colIndex, item, e) {
                                                                var obj = Ext.ComponentQuery.query('#pnlSetAnnexD03')[0];
                                                                var store = Ext.getStore('AnnexGroup2');
                                                                var row = store.getAt(rowIndex).data;

                                                                var ID = row.AnnexID;

                                                                var annex = "D03Annex"+ ID;
                                                                var annexTitle = "Annex-"  + ID;

                                                                var uiConfig = {menuLink:annex,pageTitle:annexTitle};

                                                                var arg = obj.extraParam;

                                                                var action = MyApp.app.getController('SetAnnexD03').getAnnexValue(ID);

                                                                arg.action = action?action:"";


                                                                //DynamicUI(uiConfig,null,arg);

                                                                //--------------------------------------
                                                                // NB: Finalized Case
                                                                //--------------------------------------

                                                                if(arg.recStatus === "F" && row.AnnexState !== "Update")
                                                                {
                                                                    msg("WARNING","Already Finalized , So no new data can be added !!!");
                                                                    return;
                                                                }

                                                                //--------------------------------------
                                                                // NB: New Case
                                                                //--------------------------------------

                                                                if(arg.from === "MV")
                                                                {
                                                                    Ext.getCmp("PopupWindow").close();
                                                                    dynamicPopUp(annex,arg);    
                                                                    Ext.getCmp("PopupWindow").setWidth(1140);
                                                                }
                                                                else
                                                                {
                                                                    DynamicUI(uiConfig,null,arg);
                                                                }

                                                            },
                                                            icon: '../ITS/resources/images/icons/filesave.png',
                                                            iconCls: 'iconMargin',
                                                            tooltip: 'Submit'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    text: 'MyColumn517'
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    title: '४. बित्तीय विवरण तथा अन्य विवरणका सुचनाहरु ',
                                    items: [
                                        {
                                            xtype: 'gridpanel',
                                            itemId: 'grdAnnexGroup3Sax',
                                            hideHeaders: true,
                                            store: 'AnnexGroup3',
                                            columns: [
                                                {
                                                    xtype: 'gridcolumn',
                                                    dataIndex: 'AnnexName',
                                                    text: 'AnnexName'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    width: 400,
                                                    dataIndex: 'AnnexDesc',
                                                    text: 'AnnexDesc'
                                                },
                                                {
                                                    xtype: 'actioncolumn',
                                                    iconCls: 'icon-save',
                                                    items: [
                                                        {
                                                            handler: function(view, rowIndex, colIndex, item, e) {
                                                                var obj = Ext.ComponentQuery.query('#pnlSetAnnexD03')[0];
                                                                var store = Ext.getStore('AnnexGroup3');
                                                                var row = store.getAt(rowIndex).data;
                                                                var param = obj.extraParam;

                                                                var annex = "D03Annex13";
                                                                var annexTitle = "Annex-13";

                                                                var uiConfig = {menuLink:annex,pageTitle:annexTitle};


                                                                var arg = obj.extraParam;


                                                                var action = MyApp.app.getController('SetAnnexD03').getAnnexValue(13);

                                                                arg.action = action?action:"";

                                                                //DynamicUI(uiConfig,null,arg);

                                                                //--------------------------------------
                                                                // NB: Finalized Case
                                                                //--------------------------------------

                                                                if(arg.recStatus === "F" && row.AnnexState !== "Update")
                                                                {
                                                                    msg("WARNING","Already Finalized , So no new data can be added !!!");
                                                                    return;
                                                                }

                                                                //--------------------------------------
                                                                // NB: New Case
                                                                //--------------------------------------

                                                                if(arg.from === "MV")
                                                                {
                                                                    Ext.getCmp("PopupWindow").close();
                                                                    dynamicPopUp(annex,arg);    
                                                                    Ext.getCmp("PopupWindow").setWidth(1140);
                                                                }
                                                                else
                                                                {
                                                                    DynamicUI(uiConfig,null,arg);
                                                                }



                                                            },
                                                            icon: '../ITS/resources/images/icons/filesave.png',
                                                            iconCls: 'iconMargin',
                                                            tooltip: 'Submit'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    text: 'MyColumn517'
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onLblDocUpdSaxRender: function(component, eOpts) {
        var c = component;

        c.getEl().on('click', function(){ this.fireEvent('click', c); }, c);
    }

});