/*
 * File: app/controller/VerificationModule.js
 *
 * This file was generated by Sencha Architect version 2.2.3.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.VerificationModule', {
    extend: 'Ext.app.Controller',

    onUserV_grdApplicationItemClick: function(dataview, record, item, index, e, eOpts) {

        var me=this;
        var UV_grdVeriModule=Ext.ComponentQuery.query("#UV_grdVeriModule")[0];
        UV_grdVeriModule.store.loadData(record.raw.VerificationModule);
    },

    onUV_grdVeriModuleItemClick: function(dataview, record, item, index, e, eOpts) {
        var appid = Ext.ComponentQuery.query('#UserV_grdApplication')[0].getSelectionModel().getSelection()[0].data.ApplicationID;
        var modid = Ext.ComponentQuery.query('#UV_grdVeriModule')[0].getSelectionModel().getSelection()[0].data.ModuleID;

        Ext.getStore('UV_UserVModule').load({params:{AppID:appid,ModuleID:modid}});


    },

    onPanelAfterRender: function(component, eOpts) {

    


    },

    onUVM_btnAddUVMClick: function(button, e, eOpts) {
        var appid = Ext.ComponentQuery.query('#UserV_grdApplication')[0].getSelectionModel().getSelection()[0].data.ApplicationID;
        var modid = Ext.ComponentQuery.query('#UV_grdVeriModule')[0].getSelectionModel().getSelection()[0].data.ModuleID;
        var vmFromDate=Ext.ComponentQuery.query('#UV_grdVeriModule')[0].getSelectionModel().getSelection()[0].data.VMFromDate;


        Ext.getStore('UV_UserVModule').add({"ApplicationID":appid,"ModuleID":modid,"VMFromDate":'2069.05.20',"UserID":"","VerifyLevel":"","Action":"A","FromDate":"","ToDate":""});
    },

    init: function(application) {
        this.control({
            "#UserV_grdApplication": {
                itemclick: this.onUserV_grdApplicationItemClick
            },
            "#UV_grdVeriModule": {
                itemclick: this.onUV_grdVeriModuleItemClick
            },
            "#UserVertification": {
                afterrender: this.onPanelAfterRender
            },
            "#UVM_btnAddUVM": {
                click: this.onUVM_btnAddUVMClick
            }
        });
    }

});
