/*
 * File: app/controller/CollectionSheetDeleteRegenerate.js
 *
 * This file was generated by Sencha Architect version 4.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.CollectionSheetDeleteRegenerate', {
    extend: 'Ext.app.Controller',

    stores: [
        'CollectionSheetDeleteRegenerateStore'
    ],

    onBtnLoadDataClick: function(button, e, eOpts) {
        var obj={

            OfficeCode:Ext.get('offCode').dom.innerHTML



        };
        Ext.Ajax.request({
            url:'../Handlers/Finance/Transaction/CollectionSheetTransaction/EmployeeCenterCollectionHandler.ashx',
            params:{method:'RegenerateCollectionList',offCode:getOfficeCode()
                   },
            success: function ( result, request ) {

                var obj = Ext.decode(result.responseText);
                if(obj.success === 'true'){
                    console.log("Resu",obj.root);
                    msg("SUCCESS","Load completed successfully.");



                }else{msg('FAILURE','Load unsuccessful.');}
            },
            failure: function(form, action) {
                msg("FAILURE","Load unsuccessful");    }
        });

    },

    onBtnDeleteClick: function(button, e, eOpts) {
        Ext.MessageBox.confirm('Delete Selected Collection Sheet', 'Are you sure want to Delete Selected Collection Sheet?', function(btn){


            if(btn === 'yes'){
                var obj={

                    //CollectionSheetNo:,


                };
                Ext.Ajax.request({
                    url:'../Handlers/Finance/Transaction/CollectionSheetTransaction/CollectionAdjustHandler.ashx',
                    params:{method:'Delete',collectionAdjust:JSON.stringify(obj)
                           },
                    success: function ( result, request ) {

                        var obj = Ext.decode(result.responseText);
                        if(obj.success === 'true'){
                            console.log("Resu",obj.root);
                            msg("SUCCESS","Selected Collection Sheet deleted successfully.");



                        }else{msg('FAILURE','Selected Collection Sheet Deletion unsuccessful');}
                    },
                    failure: function(form, action) {
                        msg("FAILURE","Selected Collection Sheet Deletion unsuccessful");    }
                });

            }
            else
            {

            }

        });


    },

    init: function(application) {
        this.control({
            "#btnLoadData": {
                click: this.onBtnLoadDataClick
            },
            "#btnDelete": {
                click: this.onBtnDeleteClick
            }
        });
    }

});
