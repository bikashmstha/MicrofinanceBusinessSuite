/*
 * File: app/view/TransferOfCredit.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.TransferOfCredit', {
    extend: 'Ext.panel.Panel',

    frame: true,
    height: 1000,
    id: '',
    itemId: 'frm_TransferOfCredit',
    layout: {
        align: 'stretch',
        type: 'vbox'
    },
    bodyPadding: 10,
    title: 'Transfer Of Credit',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    flex: 1,
                    frame: true,
                    height: 950,
                    itemId: 'frm_TransferOfCredit',
                    margin: 5,
                    autoScroll: true,
                    bodyPadding: 10,
                    items: [
                        {
                            xtype: 'label',
                            itemId: 'modeUpdating',
                            style: 'color:red;'
                        },
                        {
                            xtype: 'container',
                            margin: '10 0 0 220',
                            items: [
                                {
                                    xtype: 'label',
                                    margin: '30 0',
                                    maxHeight: 50,
                                    style: 'font-weight:bold;\r\nfont-size:12;\r\ntext-align:center;',
                                    text: 'बढी दाखीला भएको आयकर अर्को बर्षलाई जिम्मेवारी सारी दिन गरिएको निवेदन'
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            frame: true,
                            height: 60,
                            itemId: 'cntHeaderTc',
                            margin: '15 0 5 0',
                            layout: {
                                align: 'stretch',
                                type: 'vbox'
                            },
                            items: [
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    height: 30,
                                    maxHeight: 30,
                                    maxWidth: 650,
                                    layout: {
                                        type: 'table'
                                    },
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            itemId: 'TC_txtOffCode',
                                            width: 150,
                                            fieldLabel: 'आ.रा.का.',
                                            labelWidth: 60,
                                            readOnly: true,
                                            emptyText: '  |  |  |'
                                        }
                                    ]
                                },
                                {
                                    xtype: 'container',
                                    height: 25,
                                    layout: {
                                        align: 'stretch',
                                        type: 'hbox'
                                    },
                                    items: [
                                        {
                                            xtype: 'displayfield',
                                            flex: 1,
                                            itemId: 'TC_IROName',
                                            fieldLabel: 'आन्तरिक राजस्व कार्यालयको नाम',
                                            labelSeparator: ' ',
                                            labelWidth: 200
                                        },
                                        {
                                            xtype: 'hiddenfield',
                                            flex: 1,
                                            itemId: 'hdnTC_IROName',
                                            margin: '',
                                            fieldLabel: 'Label'
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'form',
                            frame: true,
                            height: 250,
                            margin: '0 0 5 0',
                            layout: {
                                columns: 6,
                                type: 'table'
                            },
                            bodyPadding: 10,
                            collapseFirst: false,
                            title: '१ करदाता सम्बन्धि विवरण',
                            items: [
                                {
                                    xtype: 'container',
                                    cls: 'extTbl',
                                    height: 200,
                                    layout: {
                                        columns: 6,
                                        type: 'table'
                                    },
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            colspan: 3,
                                            itemId: 'txtTC_PanNo',
                                            margin: '5px 0 0 0',
                                            fieldLabel: 'स्था . ले . नं . ',
                                            labelWidth: 80,
                                            allowBlank: false,
                                            emptyText: '  |   |   |   |   |   |   |   |',
                                            enableKeyEvents: true,
                                            enforceMaxLength: true,
                                            maskRe: /[0-9]/,
                                            maxLength: 9,
                                            minLength: 9
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 6,
                                            itemId: 'txtTC_Name',
                                            margin: '5 0 0 10',
                                            width: 250,
                                            fieldLabel: 'नाम ',
                                            labelWidth: 80,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'label',
                                            colspan: 1,
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:45px;',
                                            text: 'ठेगाना '
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:30px;',
                                            text: 'घर नं .'
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:30px;',
                                            text: 'वार्ड नं .'
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:30px;',
                                            text: 'गांउ / टोल र बाटोको नाम'
                                        },
                                        {
                                            xtype: 'radiogroup',
                                            itemId: 'TC_VDC',
                                            margin: '5px 0 0 0',
                                            width: 200,
                                            fieldLabel: '',
                                            columns: 2,
                                            items: [
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdbtn_MNP',
                                                    readOnly: true,
                                                    boxLabel: 'म. न. पा.'
                                                },
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdbtn_UMNP',
                                                    readOnly: true,
                                                    boxLabel: 'उ. म. न. पा.'
                                                },
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdbtn_NP',
                                                    readOnly: true,
                                                    boxLabel: 'न. पा.'
                                                },
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdbtn_VDC',
                                                    readOnly: true,
                                                    boxLabel: 'गा. वि. स.'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:50px;',
                                            text: 'जिल्ला'
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 2,
                                            itemId: 'txtTC_HouseNo',
                                            margin: '5 0 0 90',
                                            width: 50,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtTC_WardNo',
                                            margin: '',
                                            width: 50,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtTC_ToleName',
                                            margin: '',
                                            width: 140,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtTC_VDCName',
                                            margin: '',
                                            width: 200,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtTC_DistrictName',
                                            margin: '',
                                            width: 100,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 2,
                                            itemId: 'txtTC_Phone',
                                            margin: '5px 0 0 0',
                                            width: 150,
                                            fieldLabel: 'फोन ',
                                            labelWidth: 60,
                                            readOnly: true,
                                            enforceMaxLength: false
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            height: 50,
                            layout: {
                                align: 'stretch',
                                type: 'hbox'
                            },
                            items: [
                                {
                                    xtype: 'combobox',
                                    itemId: 'cmbTC_FiscalYear',
                                    margin: '0 10',
                                    width: 180,
                                    fieldLabel: 'आ.व.',
                                    labelWidth: 35,
                                    allowBlank: false,
                                    emptyText: '----Select----',
                                    maskRe: /[0-9]/,
                                    displayField: 'fiscalYear',
                                    forceSelection: true,
                                    queryMode: 'local',
                                    store: 'FiscalYear',
                                    valueField: 'fiscalYear'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'TC_txtRegNo',
                                    margin: '0 100',
                                    maxHeight: 25,
                                    width: 200,
                                    fieldLabel: 'निवेदन दर्ता नम्बर',
                                    allowBlank: false,
                                    emptyText: '  |  |  |  |  |',
                                    enableKeyEvents: true,
                                    enforceMaxLength: true,
                                    maxLength: 10
                                }
                            ]
                        },
                        {
                            xtype: 'form',
                            frame: true,
                            height: 220,
                            margin: '0 0 5 0',
                            layout: {
                                align: 'stretch',
                                type: 'vbox'
                            },
                            bodyPadding: 10,
                            collapseFirst: false,
                            title: '२ बढी दाखीला भएको कर मिलानको विवरण',
                            items: [
                                {
                                    xtype: 'container',
                                    height: 20,
                                    itemId: 'actionContainer',
                                    padding: '',
                                    layout: {
                                        align: 'stretch',
                                        padding: '',
                                        type: 'hbox'
                                    },
                                    items: [
                                        {
                                            xtype: 'button',
                                            itemId: 'TC_btnAdd',
                                            maxWidth: 50,
                                            icon: '',
                                            iconCls: 'icon-add',
                                            text: 'Add'
                                        }
                                    ]
                                },
                                {
                                    xtype: 'gridpanel',
                                    flex: 1,
                                    itemId: 'grdTC',
                                    store: 'TaxCreditTransferDetail',
                                    columns: [
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'TransferSn',
                                            text: 'क.स.'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            hidden: true,
                                            dataIndex: 'Pan',
                                            text: 'Pan',
                                            editor: {
                                                xtype: 'textfield',
                                                itemId: 'txtPanTC'
                                            }
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            hidden: true,
                                            dataIndex: 'FiscalYear',
                                            text: 'FiscalYear'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            hidden: true,
                                            dataIndex: 'RegistrationNo',
                                            text: 'RegistrationNo'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 150,
                                            dataIndex: 'FiscalYearFrom',
                                            text: 'बढी दाखीला भएको आयवर्ष',
                                            editor: {
                                                xtype: 'combobox',
                                                itemId: 'cmbTC_FiscalYrFrom',
                                                emptyText: '----Select----',
                                                displayField: 'fiscalYear',
                                                forceSelection: true,
                                                queryMode: 'local',
                                                store: 'FiscalYear',
                                                valueField: 'fiscalYear'
                                            }
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 150,
                                            dataIndex: 'FiscalYearTo',
                                            text: 'कर मिलान गर्ने आयवर्ष',
                                            editor: {
                                                xtype: 'combobox',
                                                itemId: 'cmbTC_FiscalYrTo',
                                                width: 100,
                                                emptyText: '----Select----',
                                                displayField: 'fiscalYear',
                                                forceSelection: true,
                                                queryMode: 'local',
                                                store: 'FiscalYear',
                                                valueField: 'fiscalYear'
                                            }
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 150,
                                            align: 'right',
                                            dataIndex: 'ClaimAmount',
                                            text: 'कर मिलान गर्ने रकम',
                                            editor: {
                                                xtype: 'textfield',
                                                itemId: 'txtTC_ClaimAmount',
                                                fieldCls: 'TxtRight',
                                                enforceMaxLength: true,
                                                maskRe: /[0-9]/,
                                                maxLength: 20,
                                                listeners: {
                                                    change: {
                                                        fn: me.onTxtTC_ClaimAmountChange,
                                                        scope: me
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 150,
                                            align: 'right',
                                            dataIndex: 'ApproveAmount',
                                            text: 'मिलान गर्न स्बिकृत रकम',
                                            editor: {
                                                xtype: 'textfield',
                                                itemId: 'txtTC_ApproveAmount',
                                                labelAlign: 'right',
                                                fieldCls: 'TxtRight',
                                                enforceMaxLength: true,
                                                maskRe: /[0-9]/,
                                                maxLength: 20,
                                                listeners: {
                                                    change: {
                                                        fn: me.onTxtTC_ApproveAmountChange,
                                                        scope: me
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            hidden: true,
                                            dataIndex: 'Terminal',
                                            text: 'Terminal'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            hidden: true,
                                            dataIndex: 'TranDate',
                                            text: 'TranDate'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            hidden: true,
                                            dataIndex: 'UserName',
                                            text: 'UserName'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            items: [
                                                {
                                                    handler: function(view, rowIndex, colIndex, item, e) {
                                                        var TotalClaimAmount=Ext.ComponentQuery.query('#txtTotalClaimAmount')[0];
                                                        var TotalApproveAmount=Ext.ComponentQuery.query('#txtTotalApproveAmount')[0];
                                                        var deleteAction=Ext.ComponentQuery.query('#hdnActionSetForEditDelete')[0].getValue();
                                                        var recordStatus=Ext.ComponentQuery.query('#hdnRecordStatus')[0].getValue();

                                                        var str=Ext.getStore('TaxCreditTransferDetail');
                                                        var grd=Ext.ComponentQuery.query('#grdTC')[0];

                                                        if(deleteAction==='D')
                                                        {
                                                            return;
                                                        }
                                                        else if(recordStatus==='F')
                                                        {
                                                            return;
                                                        }
                                                        else if(recordStatus==='D')
                                                        {
                                                            return;
                                                        }
                                                        else if(deleteAction!='D' || recordStatus!='F' || recordStatus!='D')
                                                        {

                                                            // var doIt=msg("WARNING","के तपाई साचै डाटा हटाउन चाउनुहुन्छ?"); 
                                                            Ext.Msg.confirm('Confirm Action','के तपाई डाटा हटाउन चाहनुहुन्छ?',function(btn){

                                                                if(btn==='yes')
                                                                {
                                                                    str.removeAt(rowIndex);

                                                                    grd.bindStore(str);    


                                                                    TotalClaimAmount.setValue('').getValue();
                                                                    TotalApproveAmount.setValue('').getValue();

                                                                }


                                                            });

                                                            /* if( doIt===true)
                                                            {



                                                            str.removeAt(rowIndex);

                                                            grd.bindStore(str);    


                                                            TotalClaimAmount.setValue('').getValue();
                                                            TotalApproveAmount.setValue('').getValue();


                                                            }*/
                                                        }
                                                    },
                                                    icon: '../ITS/resources/images/icons/cancel.png'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            hidden: true,
                                            dataIndex: 'Action',
                                            text: 'Action'
                                        }
                                    ],
                                    plugins: [
                                        Ext.create('Ext.grid.plugin.RowEditing', {
                                            pluginId: 'pluginTC',
                                            listeners: {
                                                edit: {
                                                    fn: me.onGridroweditingpluginEdit,
                                                    scope: me
                                                },
                                                canceledit: {
                                                    fn: me.onGridroweditingpluginCanceledit,
                                                    scope: me
                                                },
                                                beforeedit: {
                                                    fn: me.onGridroweditingpluginBeforeEdit,
                                                    scope: me
                                                }
                                            }
                                        })
                                    ]
                                },
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    maxHeight: 25,
                                    layout: {
                                        align: 'stretch',
                                        type: 'hbox'
                                    },
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtTotalClaimAmount',
                                            margin: '0 0 0 150',
                                            maxHeight: 20,
                                            fieldLabel: 'जम्मा',
                                            labelAlign: 'right',
                                            fieldCls: 'TxtRight',
                                            readOnly: true,
                                            enforceMaxLength: true,
                                            maxLength: 20
                                        },
                                        {
                                            xtype: 'textfield',
                                            flex: 1,
                                            itemId: 'txtTotalApproveAmount',
                                            margin: '0 0 0 5',
                                            maxHeight: 20,
                                            maxWidth: 130,
                                            labelAlign: 'right',
                                            fieldCls: 'TxtRight',
                                            fieldStyle: 'TxtRight',
                                            readOnly: true,
                                            enforceMaxLength: true,
                                            maxLength: 20
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            height: 120,
                            itemId: 'TC_TexBoxField',
                            layout: {
                                align: 'stretch',
                                type: 'hbox'
                            },
                            items: [
                                {
                                    xtype: 'textfield',
                                    itemId: 'TC_txtOfficerCode',
                                    margin: '20 0',
                                    maxHeight: 22,
                                    fieldLabel: 'अधिकृत कोड',
                                    enforceMaxLength: true,
                                    maskRe: /[0-9]/,
                                    maxLength: 5
                                },
                                {
                                    xtype: 'textfield',
                                    flex: 1,
                                    itemId: 'TC_txtOfficerName',
                                    margin: '20 0 0 70',
                                    maxHeight: 22,
                                    maxWidth: 200,
                                    fieldLabel: 'नाम',
                                    labelWidth: 30,
                                    enforceMaxLength: true,
                                    maxLength: 25
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            frame: true,
                            itemId: 'TC_Button',
                            style: 'text-align:right;',
                            items: [
                                {
                                    xtype: 'button',
                                    itemId: 'TC_btnSave',
                                    margin: '10 5',
                                    iconCls: 'icon-save',
                                    text: 'Save'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'TC_btnEdit',
                                    margin: '10 5',
                                    iconCls: 'icon-edit',
                                    text: 'Edit'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'TC_btnDelete',
                                    margin: '10 5',
                                    iconCls: 'icon-delete',
                                    text: 'Delete'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'TC_btnSubmit',
                                    margin: '10 5',
                                    iconCls: 'icon-ok',
                                    text: 'Submit'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'TC_btnCancel',
                                    margin: '10 5',
                                    iconCls: 'icon-cancel',
                                    text: 'Cancel'
                                }
                            ]
                        },
                        {
                            xtype: 'hiddenfield',
                            anchor: '100%',
                            itemId: 'hdnAction',
                            fieldLabel: 'Label'
                        },
                        {
                            xtype: 'hiddenfield',
                            anchor: '100%',
                            itemId: 'hdnTranNo',
                            fieldLabel: 'Label'
                        },
                        {
                            xtype: 'hiddenfield',
                            itemId: 'hdnRecordStatus',
                            fieldLabel: 'Label'
                        },
                        {
                            xtype: 'hiddenfield',
                            anchor: '100%',
                            itemId: 'hdnActionSetForEditDelete',
                            fieldLabel: 'Label'
                        }
                    ],
                    listeners: {
                        afterrender: {
                            fn: me.onFrm_TransferOfCreditAfterRender,
                            scope: me
                        }
                    }
                }
            ]
        });

        me.callParent(arguments);
    },

    onTxtTC_ClaimAmountChange: function(field, newValue, oldValue, eOpts) {

        var grd=Ext.ComponentQuery.query('#grdTC')[0];
        var store=grd.getStore();
        var selectedRow=grd.getSelectionModel();

        var record=grd.getSelectionModel().getSelection()[0];


        var ClaimAmount=Ext.ComponentQuery.query('#txtTC_ClaimAmount')[0].getValue();

        var TotalClaimAmount=Ext.ComponentQuery.query('#txtTotalClaimAmount')[0];

        var cAmount=(ClaimAmount==="")?0:ClaimAmount;


        TotalClaimAmount.setValue(cAmount);


        var sum=0;

        var rowIndex=store.indexOf(record);
        var index=0;

        store.each(function(rec){

            if(rec.get('ClaimAmount')!=="" && rowIndex!==index)
            {
                sum=parseInt(sum)+parseInt(rec.get('ClaimAmount'));
            }
            index++;
        });

        var OverAllTotal=parseInt(sum)+parseInt(cAmount);

        TotalClaimAmount.setValue(OverAllTotal);
    },

    onTxtTC_ApproveAmountChange: function(field, newValue, oldValue, eOpts) {
        var grd=Ext.ComponentQuery.query('#grdTC')[0];
        var store=grd.getStore();
        var selectedRow=grd.getSelectionModel();

        var record=grd.getSelectionModel().getSelection()[0];


        var ApproveAmount=Ext.ComponentQuery.query('#txtTC_ApproveAmount')[0].getValue();

        var TotalApproveAmount=Ext.ComponentQuery.query('#txtTotalApproveAmount')[0];

        var aAmount=(ApproveAmount==="")?0:ApproveAmount;


        TotalApproveAmount.setValue(aAmount);


        var sum=0;

        var rowIndex=store.indexOf(record);
        var index=0;

        store.each(function(rec){

            if(rec.get('ApproveAmount')!=="" && rowIndex!==index)
            {
                sum=parseInt(sum)+parseInt(rec.get('ApproveAmount'));
            }
            index++;
        });

        var OverAllTotal=parseInt(sum)+parseInt(aAmount);

        TotalApproveAmount.setValue(OverAllTotal);
    },

    onGridroweditingpluginEdit: function(editor, e, eOpts) {
        var FiscalYrFrom=Ext.ComponentQuery.query('#cmbTC_FiscalYrFrom')[0].getValue();
        var FiscalYrTo=Ext.ComponentQuery.query('#cmbTC_FiscalYrTo')[0].getValue();
        var ClaimAmount=Ext.ComponentQuery.query('#txtTC_ClaimAmount')[0].getValue();
        var ApproveAmount=Ext.ComponentQuery.query('#txtTC_ApproveAmount')[0].getValue();

        //Ext.ComponentQuery.query('#TC_btnSave')[0].enable();


        var TC_Details=Ext.ComponentQuery.query('#grdTC')[0];
        var col;
        var recd;
        var record;


        var errMsg="";
        var errCount=0;

        if(FiscalYrFrom==="")
        {
            errCount++;
            errMsg +=errCount+") "+"कृपया बढी दाखीला भएको आयवर्ष छान्नुहोस्।<br/>";
        }
        if(FiscalYrTo==="")
        {
            errCount++;
            errMsg +=errCount+") "+"कृपया कर मिलान गर्ने आयवर्ष छान्नुहोस्।<br/>";
        }
        if(ClaimAmount==="")
        {
            errCount++;
            errMsg +=errCount+") "+"कृपया कर मिलान गर्ने रकम हाल्नुहोस्।<br/>";
        }
        if(ApproveAmount==="")
        {
            errCount++;
            errMsg +=errCount+") "+"कृपया कर मिलान गर्न स्बिकृत रकम हाल्नुहोस्।<br/>";
        }
        if(FiscalYrFrom>FiscalYrTo)
        {
            errCount++;
            errMsg +=errCount+") "+"कृपया कर मिलान गर्ने आयवर्ष भन्दा बढी दाखीला भएको आयवर्ष बढी हुनु भएन।<br/>";
        }
        if(FiscalYrFrom===FiscalYrTo)
        {
            errCount++;
            errMsg +=errCount+") "+"कृपया कर मिलान गर्ने आयवर्ष र बढी दाखीला भएको आयवर्ष बराबर हुनु भएन।<br/>";
        }

        if(errCount>0)
        {
            ValidationField();
            msg("WARNING",errMsg);    
            return false;

        }

        //////////////////////////////////////////////////////////////////////////////////////////

        function ValidationField()
        {
            col = TC_Details.headerCt.getHeaderAtIndex(0);
            recd = TC_Details.store.data.items;
            record = recd[recd.length-1];
            TC_Details.getPlugin('pluginTC').startEdit(record, col);
            return;
        }

        //////////////////////////////////////////////////////////////////////////////////////////



    },

    onGridroweditingpluginCanceledit: function(editor, e, eOpts) {
        //grid.store.removeAt(grid.rowIdx);

        /*var str=Ext.getStore('TaxCreditTransferDetail').loadData([],false);

        Ext.ComponenetQuery.query('#grdTC')[0].bindStore(str);*/
    },

    onGridroweditingpluginBeforeEdit: function(editor, e, eOpts) {
        var deleteAction=Ext.ComponentQuery.query('#hdnActionSetForEditDelete')[0].getValue();

        /*if(deleteAction==='D')
        {
        return false;
        }
        else
        {
        return true;
        }*/
        var recordStatus=Ext.ComponentQuery.query('#hdnRecordStatus')[0].getValue();

        if(deleteAction==='D')
        {
            return false;
        }
        else if(recordStatus==='F')
        {
            return false;
        }
        /*else if(recordStatus!=='F')
        {
        return true;
        }*/
        else if(recordStatus==='D')
        {
            return false;
        }
        /*else if(recordStatus!=='D')
        {
        return true;
        }*/

    },

    onFrm_TransferOfCreditAfterRender: function(component, eOpts) {
        var offCode=null;
        offCode=Ext.get('offCode').dom.innerHTML;
        Ext.ComponentQuery.query('#TC_txtOffCode')[0].setValue(offCode);

        var strTaxCreditTransferDetail=Ext.getStore('TaxCreditTransferDetail');

        strTaxCreditTransferDetail.removeAll();

        Ext.ComponentQuery.query('#modeUpdating')[0].setVisible(false);

        //Ext.ComponentQuery.query('#TC_btnSave')[0].enable();

        //Ext.ComponentQuery.query('#TC_btnAdd')[0].enable();

        Ext.ComponentQuery.query('#hdnActionSetForEditDelete')[0].setValue('');
    }

});