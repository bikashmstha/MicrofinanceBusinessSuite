/*
 * File: app/view/MedicalCreditClaim.js
 *
 * This file was generated by Sencha Architect version 2.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.MedicalCreditClaim', {
    extend: 'Ext.panel.Panel',

    frame: true,
    height: 1000,
    id: '',
    itemId: 'frm_MedicalCrClaims',
    style: 'font-size:20px;\r\n\r\n\r\ntext-align:center;',
    autoScroll: false,
    layout: {
        align: 'stretch',
        type: 'vbox'
    },
    bodyPadding: 10,
    title: 'औषधोपचार कर मिलान दावीको विवरण राख्ने(अनुसूची -११)',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    flex: 1,
                    frame: true,
                    height: 950,
                    itemId: 'frm_MedicalCrClaim',
                    margin: 5,
                    autoScroll: true,
                    bodyPadding: 10,
                    items: [
                        {
                            xtype: 'container',
                            frame: true,
                            height: 125,
                            itemId: 'cntHeaderMedicalCrClaim',
                            margin: '2 0 2 0',
                            layout: {
                                align: 'stretch',
                                type: 'vbox'
                            },
                            items: [
                                {
                                    xtype: 'label',
                                    flex: 1,
                                    height: 50,
                                    margin: '2 0 0 70',
                                    style: 'font-size:20px;\r\n\r\n\r\ntext-align:center;',
                                    text: 'औषधोपचार कर मिलान दावीको विवरण राख्ने(अनुसूची -११)'
                                },
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    height: 30,
                                    maxHeight: 30,
                                    layout: {
                                        type: 'table'
                                    },
                                    items: [
                                        {
                                            xtype: 'displayfield',
                                            height: 25,
                                            hidden: false,
                                            id: '',
                                            itemId: 'hdnlblMedicalCrClaimAction',
                                            maxHeight: 25,
                                            width: 196,
                                            fieldStyle: '{color:red;}',
                                            fieldLabel: '',
                                            hideLabel: false
                                        }
                                    ]
                                },
                                {
                                    xtype: 'displayfield',
                                    flex: 1,
                                    height: 25,
                                    hidden: true,
                                    itemId: 'dispMedicalCrClaim_submissionNo',
                                    maxHeight: 25,
                                    width: 245,
                                    fieldLabel: 'सब्मिशन नं',
                                    labelWidth: 150
                                },
                                {
                                    xtype: 'container',
                                    height: 25,
                                    layout: {
                                        align: 'stretch',
                                        type: 'hbox'
                                    },
                                    items: [
                                        {
                                            xtype: 'displayfield',
                                            itemId: 'MedicalCrClaim_IROName',
                                            width: 440,
                                            fieldLabel: 'आन्तरिक राजस्व कार्यालयको नाम',
                                            labelSeparator: ' ',
                                            labelWidth: 180
                                        },
                                        {
                                            xtype: 'textfield',
                                            disabled: true,
                                            hidden: false,
                                            itemId: 'txtMCC_ASSESSMENTNO',
                                            margin: '',
                                            fieldLabel: 'ऐसिसमेनट नं',
                                            labelWidth: 80,
                                            enableKeyEvents: true,
                                            maxLength: 12,
                                            minLength: 12,
                                            size: 12
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'form',
                            frame: true,
                            height: 450,
                            margin: '0 0 5 0',
                            layout: {
                                columns: 6,
                                type: 'table'
                            },
                            bodyPadding: 10,
                            collapseFirst: false,
                            collapsible: false,
                            title: '१ करदाता सम्बन्धी विवरण',
                            titleCollapse: false,
                            items: [
                                {
                                    xtype: 'container',
                                    cls: 'extTbl',
                                    height: 350,
                                    layout: {
                                        columns: 6,
                                        type: 'table'
                                    },
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            colspan: 3,
                                            itemId: 'txtMCC_PanNo',
                                            margin: '5px 0 0 0',
                                            fieldLabel: 'स्था . ले . नं .*',
                                            labelWidth: 80,
                                            allowBlank: false,
                                            emptyText: '',
                                            enableKeyEvents: true,
                                            enforceMaxLength: true,
                                            maskRe: /[0-9]/,
                                            maxLength: 9,
                                            minLength: 9,
                                            size: 9
                                        },
                                        {
                                            xtype: 'combobox',
                                            itemId: 'ddlMCC_ActType',
                                            margin: '5 0 0 20',
                                            fieldLabel: 'खाताको किसिम*',
                                            allowBlank: false,
                                            emptyText: '---छान्नुहोस्.---',
                                            displayField: 'IncomeTaxAcctTypeName',
                                            forceSelection: true,
                                            queryMode: 'local',
                                            store: 'IncomeTaxAcctType',
                                            typeAhead: true,
                                            valueField: 'IncomeTaxAcctTypeID'
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 6,
                                            itemId: 'txtMCC_Name',
                                            margin: '5 0 0 7',
                                            readOnly: true,
                                            fieldLabel: 'नाम ',
                                            labelWidth: 30,
                                            size: 60
                                        },
                                        {
                                            xtype: 'label',
                                            colspan: 1,
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:45px;',
                                            text: 'ठेगाना '
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:30px;',
                                            text: 'घर नं .'
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:30px;',
                                            text: 'वार्ड नं .'
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:30px;',
                                            text: 'गांउ / टोल र बाटोको नाम'
                                        },
                                        {
                                            xtype: 'radiogroup',
                                            itemId: 'MCC_VM',
                                            margin: '5px 0 0 0',
                                            width: 200,
                                            fieldLabel: '',
                                            columns: 2,
                                            items: [
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdl_MCC_Metro_Mun',
                                                    readOnly: true,
                                                    boxLabel: 'म. न. पा.'
                                                },
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdl_MCC_Sub_Metro_Mun',
                                                    readOnly: true,
                                                    boxLabel: 'उ. म. न. पा.'
                                                },
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdl_MCC_Mun',
                                                    readOnly: true,
                                                    boxLabel: 'न. पा.'
                                                },
                                                {
                                                    xtype: 'radiofield',
                                                    itemId: 'rdl_MCC_VDC',
                                                    readOnly: true,
                                                    boxLabel: 'गा. वि. स.'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'label',
                                            margin: '5px 0 0 0',
                                            style: 'margin-right:50px;',
                                            text: 'जिल्ला'
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 2,
                                            itemId: 'txtMCC_HouseNo',
                                            margin: '5 0 0 90',
                                            width: 50,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtMCC_WardNo',
                                            margin: '',
                                            width: 50,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtMCC_ToleName',
                                            margin: '',
                                            width: 140,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtMCC_VDCName',
                                            margin: '',
                                            width: 200,
                                            readOnly: true
                                        },
                                        {
                                            xtype: 'textfield',
                                            itemId: 'txtMCC_DistrictName',
                                            margin: '',
                                            width: 100,
                                            size: 100
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 2,
                                            itemId: 'txtMCC_Phone',
                                            margin: '5px 0 0 0',
                                            width: 150,
                                            readOnly: true,
                                            fieldLabel: 'फोन ',
                                            labelWidth: 60,
                                            enforceMaxLength: false
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 2,
                                            itemId: 'txtMCC_Mobile',
                                            margin: '5px 0 0 0',
                                            width: 207,
                                            readOnly: true,
                                            fieldLabel: 'मोबाइल ',
                                            labelWidth: 62
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 2,
                                            itemId: 'txtMCC_Email',
                                            margin: '5px 0 0 0',
                                            width: 340,
                                            readOnly: true,
                                            fieldLabel: 'इमेल ',
                                            labelWidth: 60
                                        },
                                        {
                                            xtype: 'displayfield',
                                            colspan: 6,
                                            itemId: 'MCC_TpOfficeType',
                                            width: 400,
                                            fieldLabel: 'करदाताको स्थिति '
                                        },
                                        {
                                            xtype: 'combobox',
                                            colspan: 3,
                                            itemId: 'txtMCC_FiscalYear',
                                            margin: '20 0 0 0',
                                            fieldLabel: 'आय बर्ष*',
                                            labelWidth: 65,
                                            emptyText: '---छान्नुहोस्.---',
                                            displayField: 'fiscalYear',
                                            forceSelection: true,
                                            store: 'FiscalYear',
                                            typeAhead: true,
                                            valueField: 'fiscalYear'
                                        },
                                        {
                                            xtype: 'label',
                                            colspan: 4,
                                            hidden: true,
                                            width: 400,
                                            text: '( भर्ने उदाहरण २०६२.६३ )'
                                        },
                                        {
                                            xtype: 'textfield',
                                            colspan: 3,
                                            itemId: 'txtMCC_ClainDate',
                                            margin: '5 0 0 0',
                                            fieldLabel: 'दावी मिति*',
                                            labelWidth: 60,
                                            allowBlank: false,
                                            emptyText: 'YYYY.MM.DD',
                                            maskRe: /[0-9.]/,
                                            size: 10,
                                            listeners: {
                                                blur: {
                                                    fn: me.onTxtMCC_ClainDateBlur,
                                                    scope: me
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'form',
                            frame: true,
                            height: 350,
                            margin: '0 0 0 0',
                            layout: {
                                align: 'stretch',
                                type: 'vbox'
                            },
                            bodyPadding: 10,
                            collapseFirst: false,
                            collapsible: false,
                            title: '२.  औषधोपचार कर मिलान सम्वन्धी  विवरण ',
                            titleCollapse: false,
                            items: [
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    layout: {
                                        align: 'stretch',
                                        type: 'vbox'
                                    },
                                    items: [
                                        {
                                            xtype: 'toolbar',
                                            height: 30,
                                            margin: 1,
                                            items: [
                                                {
                                                    xtype: 'button',
                                                    itemId: 'btnAddMCCDetail',
                                                    iconCls: 'icon-add',
                                                    text: 'Add'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'toolbar',
                                            autoScroll: false,
                                            items: [
                                                {
                                                    xtype: 'tbspacer',
                                                    width: 16
                                                },
                                                {
                                                    xtype: 'tbseparator'
                                                },
                                                {
                                                    xtype: 'label',
                                                    cls: 'LblCenter',
                                                    width: 91,
                                                    text: '१'
                                                },
                                                {
                                                    xtype: 'tbseparator'
                                                },
                                                {
                                                    xtype: 'label',
                                                    cls: 'LblCenter',
                                                    width: 141,
                                                    text: '२'
                                                },
                                                {
                                                    xtype: 'tbseparator'
                                                },
                                                {
                                                    xtype: 'label',
                                                    cls: 'LblCenter',
                                                    width: 141,
                                                    text: '३'
                                                },
                                                {
                                                    xtype: 'tbseparator'
                                                },
                                                {
                                                    xtype: 'label',
                                                    cls: 'LblCenter',
                                                    width: 91,
                                                    text: '४'
                                                },
                                                {
                                                    xtype: 'tbseparator'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'gridpanel',
                                            flex: 1,
                                            height: 150,
                                            itemId: 'grdMedicalCrClaimDetails',
                                            margin: '0 0 5 0',
                                            autoScroll: false,
                                            hideHeaders: false,
                                            store: 'MedicalCreditClaimAnx11',
                                            viewConfig: {

                                            },
                                            columns: [
                                                {
                                                    xtype: 'rownumberer'
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    dataIndex: 'MedicalExpDate',
                                                    text: 'खर्च गरेको मिति',
                                                    editor: {
                                                        xtype: 'textfield',
                                                        itemId: 'txtMCCMedicalExpDate',
                                                        width: 100,
                                                        maskRe: /[0-9.]/,
                                                        listeners: {
                                                            blur: {
                                                                fn: me.onTxtMCCMedicalExpDateBlur,
                                                                scope: me
                                                            }
                                                        }
                                                    }
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    width: 150,
                                                    dataIndex: 'MedicalServiceProvider',
                                                    text: 'स्वास्थ्य सेवा दिनेको नाम ',
                                                    editor: {
                                                        xtype: 'textfield',
                                                        itemId: 'txtMCCMedicalServiceProvider'
                                                    }
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    width: 150,
                                                    dataIndex: 'MedicalServiceType',
                                                    text: 'स्वास्थ्य सेवाको किसिम',
                                                    editor: {
                                                        xtype: 'combobox',
                                                        itemId: 'ddlMCCMedicalServiceType',
                                                        emptyText: 'Select ...',
                                                        displayField: 'MedServiceTypName',
                                                        forceSelection: true,
                                                        queryMode: 'local',
                                                        store: 'MedServiceTypAnx11',
                                                        valueField: 'MedServiceTypID'
                                                    }
                                                },
                                                {
                                                    xtype: 'gridcolumn',
                                                    dataIndex: 'MedicalExpAmt',
                                                    text: 'औषधोपचार खर्च',
                                                    editor: {
                                                        xtype: 'textfield',
                                                        validator: function(value) {
                                                            return /^[0-9]{0,254}\.{0,1}[0-9]{0,2}$/.test(value)? true : 'कृपया दुईदशमलव विन्दु सम्म भर्नुहोस्!!!';
                                                        },
                                                        itemId: 'txtMCCMedicalExpAmt',
                                                        width: 100,
                                                        fieldCls: 'TxtRight',
                                                        enableKeyEvents: true,
                                                        maskRe: /[0-9.]/,
                                                        maxLength: 10
                                                    }
                                                },
                                                {
                                                    xtype: 'actioncolumn',
                                                    items: [
                                                        {
                                                            handler: function(view, rowIndex, colIndex, item, e) {
                                                                /*
                                                                var store = Ext.getStore('MedicalCreditClaimAnx11');
                                                                var grd = Ext.ComponentQuery.query('#grdMedicalCrClaimDetails')[0];
                                                                var row = store.getAt(rowIndex).data;

                                                                Ext.Msg.confirm('Confirm Action', 'Do you want to Remove ?', function(btn) {
                                                                if(btn == 'yes'){
                                                                if(row.Action === "E")
                                                                {    
                                                                row.Action = "D";
                                                                grd.bindStore(store);         
                                                                store.filter(function(item){
                                                                return item.get("Action")!= 'D';
                                                                });
                                                                }
                                                                else
                                                                {

                                                                store.removeAt(rowIndex);
                                                                }


                                                                return true;
                                                                }
                                                                }, this);  


                                                                Ext.MessageBox.confirm('Alert',"Are you sure want to remove it from Details list? ",function(btn){
                                                                if(btn==='yes')
                                                                {

                                                                var TotalAmt = Ext.ComponentQuery.query('#txtMCC_TotalMedExpCFY')[0];
                                                                var str = Ext.getStore('MedicalCreditClaimAnx11');
                                                                var record = str.data.items[rowIndex].data; 

                                                                if(record.Action === "A"||record.Action === "E")
                                                                {

                                                                TotalAmt.setValue(Number(TotalAmt.getValue())- Number(record.MedicalExpAmt));

                                                                str.removeAt(rowIndex);

                                                                }
                                                                else
                                                                { 

                                                                record.Action="D";
                                                                str.filter(function(item){
                                                                return item.get('Action')!='D';

                                                                });
                                                                }
                                                                Ext.ComponentQuery.query('#grdMedicalCrClaimDetails')[0].bindStore(str);

                                                                }

                                                                });


                                                                */

                                                                var store = Ext.getStore('MedicalCreditClaimAnx11');
                                                                var grd =  Ext.ComponentQuery.query('#grdMedicalCrClaimDetails')[0];
                                                                var row = store.getAt(rowIndex).data;

                                                                var finAmount = Ext.ComponentQuery.query('#txtMCC_TotalMedExpCFY')[0];
                                                                var totAmount = (row.MedicalExpAmt === "")?0:row.MedicalExpAmt;
                                                                var overallTot = "";

                                                                Ext.Msg.confirm('Confirm Action', 'Do you want to Remove ?', function(btn) {
                                                                    if(btn == 'yes'){

                                                                        overallTot = parseFloat(finAmount.getValue())- parseFloat(totAmount);        
                                                                        finAmount.setValue(overallTot);

                                                                        if(row.Action === "E")
                                                                        {    
                                                                            row.Action = "D";
                                                                            grd.bindStore(store);         
                                                                            store.filter(function(item){
                                                                                return item.get("Action")!= 'D';
                                                                            });
                                                                        }
                                                                        else
                                                                        {
                                                                            store.removeAt(rowIndex);
                                                                        }

                                                                        return true;
                                                                    }
                                                                }, this);
                                                            },
                                                            icon: '../ITS/resources/images/icons/cancel.png'
                                                        }
                                                    ]
                                                }
                                            ],
                                            plugins: [
                                                Ext.create('Ext.grid.plugin.RowEditing', {
                                                    ptype: 'rowediting',
                                                    pluginId: 'plugingrdMedicalCrClaimDetails',
                                                    listeners: {
                                                        canceledit: {
                                                            fn: me.onGridroweditingpluginCanceledit,
                                                            scope: me
                                                        },
                                                        edit: {
                                                            fn: me.onGridroweditingpluginEdit,
                                                            scope: me
                                                        },
                                                        validateedit: {
                                                            fn: me.onGridroweditingpluginValidateedit,
                                                            scope: me
                                                        }
                                                    }
                                                })
                                            ]
                                        },
                                        {
                                            xtype: 'toolbar',
                                            margin: '-4 0 0 0 ',
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    margins: '0 40 0 290',
                                                    height: 30,
                                                    text: 'जम्मा औषधोपचार खर्च :'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    margins: '0 0',
                                                    itemId: 'txtMCC_TotalMedExpCFY',
                                                    margin: '0 0 0 0',
                                                    width: 90,
                                                    fieldCls: 'TxtRight',
                                                    readOnly: true,
                                                    fieldLabel: ''
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'toolbar',
                                            margin: '-4 0 0 0 ',
                                            items: [
                                                {
                                                    xtype: 'textfield',
                                                    validator: function(value) {
                                                        return /^[0-9]{0,254}\.{0,1}[0-9]{0,2}$/.test(value)? true : 'कृपया दुईदशमलव विन्दु सम्म भर्नुहोस्!!!';
                                                    },
                                                    itemId: 'txtMCC_MedCrclRemLFY',
                                                    margin: '5 0 0 0',
                                                    fieldLabel: ' गत आयबर्ष सम्मको मिलान गर्न बांकी औषधोपचार खर्च',
                                                    labelWidth: 220,
                                                    enforceMaxLength: true,
                                                    maskRe: /[0-9.]/,
                                                    maxLength: 17
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    itemId: 'txtMCC_MedicalTaxCrRemaining',
                                                    margin: '5 0 0 4',
                                                    readOnly: true,
                                                    fieldLabel: ' मिलान गर्न बांकी औषधोपचार खर्च',
                                                    labelWidth: 150
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    validator: function(value) {
                                                        return /^[0-9]{0,254}\.{0,1}[0-9]{0,2}$/.test(value)? true : 'कृपया दुईदशमलव विन्दु सम्म भर्नुहोस्!!!';
                                                    },
                                                    itemId: 'txtMCC_MedCrClCFY',
                                                    margin: '5 0 0 4',
                                                    fieldLabel: 'यस आयबर्षमा औषधोपचार खर्च मिलान दावी',
                                                    labelWidth: 220,
                                                    enforceMaxLength: true,
                                                    maskRe: /[0-9.]/,
                                                    maxLength: 17
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            frame: true,
                            itemId: 'cntMCC_button',
                            style: 'text-align:right;',
                            items: [
                                {
                                    xtype: 'button',
                                    itemId: 'btnMCC_Save',
                                    margin: '10 5',
                                    iconCls: 'icon-save',
                                    text: 'Save'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'btnMCC_submit',
                                    margin: '10 5',
                                    iconCls: 'icon-ok',
                                    text: 'Submit'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'btnMCC_Edit',
                                    margin: '10 5',
                                    iconCls: 'icon-edit',
                                    text: 'Edit'
                                },
                                {
                                    xtype: 'button',
                                    hidden: true,
                                    itemId: 'btnMCC_Print',
                                    margin: '10 5',
                                    iconCls: 'icon-print',
                                    text: 'Print'
                                },
                                {
                                    xtype: 'button',
                                    hidden: true,
                                    itemId: 'btnMCC_Verify',
                                    margin: '10 5',
                                    text: 'Verify'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'btnMCC_Delete',
                                    margin: '10 5',
                                    iconCls: 'icon-delete',
                                    text: 'Delete'
                                },
                                {
                                    xtype: 'button',
                                    itemId: 'btnMCC_Cancel',
                                    margin: '10 5',
                                    iconCls: 'icon-cancel',
                                    text: 'Cancel'
                                }
                            ]
                        },
                        {
                            xtype: 'hiddenfield',
                            itemId: 'hdnMCC_Office_Code',
                            fieldLabel: ''
                        },
                        {
                            xtype: 'hiddenfield',
                            itemId: 'hdnMCC_Action',
                            fieldLabel: 'Label'
                        },
                        {
                            xtype: 'hiddenfield',
                            anchor: '100%',
                            itemId: 'hdnMCCTranNo',
                            fieldLabel: 'Label'
                        },
                        {
                            xtype: 'hiddenfield',
                            anchor: '100%',
                            itemId: 'MedicalCreditClaimLoginOffice',
                            fieldLabel: 'Label'
                        }
                    ],
                    listeners: {
                        afterrender: {
                            fn: me.onFrm_MedicalCrClaimAfterRender,
                            scope: me
                        }
                    }
                }
            ]
        });

        me.callParent(arguments);
    },

    onTxtMCC_ClainDateBlur: function(field, options) {
        return validateFutureDate(field.getValue(),"Y",function(){field.focus();});
    },

    onTxtMCCMedicalExpDateBlur: function(field, options) {
        return validateFutureDate(field.getValue(),"Y",function(){field.focus();});
    },

    onGridroweditingpluginCanceledit: function(grid, options) {
        /*
        var TotalAmt = Ext.ComponentQuery.query('#txtMCC_TotalMedExpCFY')[0];
        var str = Ext.getStore('MedicalCreditClaimAnx11');
        var record = str.data.items[e.rowIdx].data;
        if(record.Action === "A"||record.Action === "E")
        {
        TotalAmt.setValue(Number(TotalAmt.getValue())- Number(record.MedicalExpAmt));
        var TempGrandTotal = 0;
        if(TotalAmt.getValue()!== '')
        {
        TempGrandTotal = TotalAmt.getValue();       
        }

        TotalAmt.setValue(TempGrandTotal.toFixed(2));
        }

        Ext.getStore('MedicalCreditClaimAnx11').removeAt(e.rowIdx);


        var ddlMCCMedicalServiceType = Ext.ComponentQuery.query("#ddlMCCMedicalServiceType")[0];
        var fpVal = ddlMCCMedicalServiceType.getValue();

        if(fpVal === null)
        {
        grid.store.removeAt(grid.rowIdx);
        }
        */

        //grid.store.removeAt(grid.rowIdx);
        var btnAddMCCDetail = Ext.ComponentQuery.query('#btnAddMCCDetail')[0];
        btnAddMCCDetail.enable(true);
    },

    onGridroweditingpluginEdit: function(editor, e, options) {
        editor.newValues.MedicalExpAmt = editor.newValues.MedicalExpAmt === ""?null:editor.newValues.MedicalExpAmt;
    },

    onGridroweditingpluginValidateedit: function(editor, e, options) {
        var count=0;
        var message="";
        var valid=true;
        var me = this;
        var errorMsg = "";

        var btnAddMCCDetail = Ext.ComponentQuery.query('#btnAddMCCDetail')[0];

        var txtMCCMedicalExpDate   = Ext.ComponentQuery.query('#txtMCCMedicalExpDate')[0].getValue();
        var txtMCCMedicalServiceProvider = Ext.ComponentQuery.query('#txtMCCMedicalServiceProvider')[0].getValue();
        var ddlMCCMedicalServiceType = Ext.ComponentQuery.query('#ddlMCCMedicalServiceType')[0].getValue();
        var txtMCCMedicalExpAmt = Ext.ComponentQuery.query('#txtMCCMedicalExpAmt')[0].getValue();


        if(txtMCCMedicalExpDate === "" || txtMCCMedicalExpDate === null)
        {

            count++;
            errorMsg = errorMsg +'<br/>'+ count + ") कृपया खर्च गरेको मिति भर्नुहोस् !!! ";
            btnAddMCCDetail.disable(true);

        }

        if(txtMCCMedicalServiceProvider === "" || txtMCCMedicalServiceProvider === null)
        {

            count++;
            errorMsg = errorMsg +'<br/>'+ count + ") कृपया स्वास्थ्य सेवा दिनेको नाम भर्नुहोस् !!! ";
            btnAddMCCDetail.disable(true);

        }

        if(ddlMCCMedicalServiceType === "" || ddlMCCMedicalServiceType === null)
        {

            count++;
            errorMsg = errorMsg +'<br/>'+ count + ")  कृपया स्वास्थ्य सेवाको किसिम छान्नुहोस् !!!";
            btnAddMCCDetail.disable(true);

        }


        if(txtMCCMedicalExpAmt === "" || txtMCCMedicalExpAmt === null)
        {

            count++;
            errorMsg = errorMsg +'<br/>'+ count + ")कृपया औषधोपचार खर्च भर्नुहोस् !!! ";
            btnAddMCCDetail.disable(true);

        }
        else
        {
            btnAddMCCDetail.enable(true);
        }


        if(count >0)
        {
            msg("WARNING",errorMsg);
            return false;
        }

    },

    onFrm_MedicalCrClaimAfterRender: function(abstractcomponent, options) {
        var offCode = Ext.get('offCode').dom.innerHTML;
        Ext.ComponentQuery.query('#MedicalCreditClaimLoginOffice')[0].setValue(offCode);
        //alert('form' + offCode);
    }

});