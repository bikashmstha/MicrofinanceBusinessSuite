/*
 * File: app/view/MFLoanEdit.js
 *
 * This file was generated by Sencha Architect version 4.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.MFLoanEdit', {
    extend: 'Ext.panel.Panel',

    requires: [
        'Ext.form.Panel',
        'Ext.form.field.ComboBox',
        'Ext.form.field.Checkbox',
        'Ext.button.Button',
        'Ext.form.field.Display'
    ],

    frame: true,
    title: 'Loan Edit',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    frame: true,
                    id: 'frmMFLoanEdit',
                    itemId: 'frmMFLoanEdit',
                    autoScroll: true,
                    bodyPadding: 10,
                    title: '',
                    items: [
                        {
                            xtype: 'container',
                            layout: {
                                type: 'table',
                                columns: 5
                            },
                            items: [
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtLoanNo',
                                    fieldLabel: 'Loan No',
                                    labelWidth: 115,
                                    fieldStyle: 'background-color:#DAEBE1;background-image:none;',
                                    size: 35,
                                    listeners: {
                                        afterrender: {
                                            fn: me.onTextfieldAfterRender,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtDed1',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Deduction 1',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtDed2',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Deduction 2',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtLoanDateBS',
                                    fieldLabel: 'Loan Date(B.S.)',
                                    labelWidth: 115,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtLoanDateAD',
                                    margin: '0 0 0 10',
                                    fieldLabel: '(A.D.)',
                                    labelWidth: 40,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtDed3',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Deduction 3',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtDed4',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Deduction 4',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 2,
                                    itemId: 'ddlCenterCode',
                                    width: 480,
                                    fieldLabel: 'Center Code',
                                    labelWidth: 115,
                                    fieldStyle: 'background-color:#DAEBE1;background-image:none;',
                                    size: 35,
                                    displayField: 'CenterName',
                                    queryMode: 'local',
                                    store: 'CenterCodeStore',
                                    valueField: 'CenterCode',
                                    listeners: {
                                        select: {
                                            fn: me.onDdlCenterCodeSelect,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtTotalDed',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Total Deduction',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtLoanYear',
                                    margin: '0 0 0 10',
                                    width: 467,
                                    fieldLabel: 'Loan Year',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 1,
                                    itemId: 'txtMemberCode',
                                    fieldLabel: 'Member Code',
                                    labelWidth: 115,
                                    fieldStyle: 'background-color:#DAEBE1;background-image:none;',
                                    listeners: {
                                        afterrender: {
                                            fn: me.onTxtMemberCodeAfterRender,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtMemberDesc',
                                    fieldLabel: '',
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;',
                                    size: 30
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtNetAmtPaid',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Net Amount Paid',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtTransferDate',
                                    margin: '0 0 0 10',
                                    width: 468,
                                    fieldLabel: 'TransferDate',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtFieldAssistantCode',
                                    fieldLabel: 'Field Assistant',
                                    labelWidth: 115,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtFieldAssistantDesc',
                                    margin: '0 0 0 10',
                                    width: 196,
                                    fieldLabel: 'Label',
                                    hideLabel: true,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtInstallmentFrequency',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Installment Frequency',
                                    labelWidth: 130
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 2,
                                    itemId: 'ddlInstallmentFrequency',
                                    margin: '0 0 0 328',
                                    fieldLabel: 'Label',
                                    hideLabel: true,
                                    labelWidth: 130,
                                    emptyText: '---SELECT---',
                                    displayField: 'RefDtlName',
                                    queryMode: 'local',
                                    store: 'InstallmentTypeRefShortStore',
                                    valueField: 'RefDtlCode'
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 2,
                                    itemId: 'ddlLoanHeading',
                                    width: 479,
                                    fieldLabel: 'Loan Heading',
                                    labelWidth: 115,
                                    fieldStyle: 'background-color:#DAEBE1;background-image:none;',
                                    size: 35,
                                    displayField: 'LoanProductName',
                                    queryMode: 'local',
                                    store: 'LoanProductCodeStore1',
                                    valueField: 'LoanProductCode',
                                    listeners: {
                                        select: {
                                            fn: me.onDdlLoanHeadingSelect,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'combobox',
                                    itemId: 'ddlLoanPeriod',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Loan Period In Mon/Yrs',
                                    labelWidth: 130,
                                    emptyText: '---SELECT---',
                                    displayField: 'RefDtlName',
                                    queryMode: 'local',
                                    store: 'LoanPeriodMYStore',
                                    valueField: 'RefDtlCode'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtLoanPeriod',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Loan Period',
                                    labelWidth: 130
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtLoanPeriodRO',
                                    margin: '0 0 0 30',
                                    fieldLabel: 'Label',
                                    hideLabel: true,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 2,
                                    itemId: 'ddlLoanPurpose',
                                    width: 480,
                                    fieldLabel: 'Loan Purpose',
                                    labelWidth: 115,
                                    fieldStyle: 'background-color:#DAEBE1;background-image:none;',
                                    size: 35,
                                    displayField: 'LoanPurposeDesc',
                                    queryMode: 'local',
                                    store: 'LoanPurposeStore1',
                                    valueField: 'LoanPurposeCode'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtGraceDays',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Grace Days',
                                    labelWidth: 130
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtCollectionDays',
                                    margin: '0 0 0 10',
                                    width: 467,
                                    fieldLabel: 'Collection Days',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtLoanSector',
                                    width: 481,
                                    fieldLabel: 'Loan Sector',
                                    labelWidth: 115,
                                    size: 35
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txt1stInstallDateBS',
                                    margin: '0 0 0 10',
                                    fieldLabel: '1st Install Date(B.S.)',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txt1stInstallDateAD',
                                    margin: '0 0 0 10',
                                    width: 468,
                                    fieldLabel: '1st Install Date(A.D.)',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtAppLoanAmt',
                                    fieldLabel: 'App Loan Amount',
                                    labelWidth: 115,
                                    size: 35
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtMaturityDateBS',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Maturity Date(B.S.)',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtMaturityDateAD',
                                    margin: '0 0 0 10',
                                    width: 469,
                                    fieldLabel: 'Maturity Date(A.D.)',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtTotalLoanTaken',
                                    fieldLabel: 'Total Loan Taken',
                                    labelWidth: 115,
                                    size: 35
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtNoOfInstallments',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'No Of Installment',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtInstallmentAmt',
                                    margin: '0 0 0 10',
                                    width: 468,
                                    fieldLabel: 'Installment Amount',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 2,
                                    itemId: 'ddlInterestCalcMethod',
                                    width: 478,
                                    fieldLabel: 'Interest Calc Method',
                                    labelWidth: 115,
                                    readOnly: true,
                                    emptyText: '---SELECT---',
                                    size: 35,
                                    displayField: 'RefDtlName',
                                    queryMode: 'local',
                                    store: 'InterestCalcMethodStore',
                                    valueField: 'RefDtlCode'
                                },
                                {
                                    xtype: 'textfield',
                                    itemId: 'txtFixedPrincipleAmt',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Fixed Principle Amount',
                                    labelWidth: 130
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtFixedInterestAmt',
                                    margin: '0 0 0 10',
                                    width: 467,
                                    fieldLabel: 'Fixed Interest Amount',
                                    labelWidth: 130,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    itemId: 'txtInterestRate',
                                    width: 476,
                                    fieldLabel: 'Interest Rate',
                                    labelWidth: 115,
                                    fieldStyle: ' background-color:#D2D2D2;background-image:none;',
                                    size: 35
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 3,
                                    itemId: 'ddlContraAcc',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Contra Account',
                                    labelWidth: 130,
                                    fieldStyle: 'background-color:#DAEBE1;background-image:none;',
                                    size: 35,
                                    displayField: 'AccountDesc',
                                    queryMode: 'local',
                                    store: 'ContraAccountStore',
                                    valueField: 'AccountCode'
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 2,
                                    itemId: 'ddlLoanStatus',
                                    fieldLabel: 'Loan Status',
                                    labelWidth: 115,
                                    size: 35,
                                    displayField: 'RefDtlName',
                                    queryMode: 'local',
                                    store: 'LoanStatusStore',
                                    valueField: 'RefDtlCode'
                                },
                                {
                                    xtype: 'checkboxfield',
                                    itemId: 'chkAdjustSaving',
                                    margin: '0 0 0 10',
                                    fieldLabel: 'Adjust To Saving',
                                    boxLabel: ''
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 2,
                                    itemId: 'ddlAdjustSaving',
                                    margin: '0 0 0 -100',
                                    fieldLabel: 'Label',
                                    hideLabel: true,
                                    fieldStyle: 'background-color:#DAEBE1;background-image:none;',
                                    displayField: 'ProductName',
                                    queryMode: 'local',
                                    store: 'AdjustToSavingStore',
                                    valueField: 'AacountCode'
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 5,
                                    itemId: 'txtPolicyNo',
                                    width: 1251,
                                    fieldLabel: 'Policy No',
                                    labelWidth: 115,
                                    size: 50
                                },
                                {
                                    xtype: 'button',
                                    colspan: 2,
                                    margin: '10 0 0 0',
                                    text: 'Repayment Schedule'
                                },
                                {
                                    xtype: 'combobox',
                                    colspan: 3,
                                    fieldLabel: 'Destination Format',
                                    labelWidth: 135,
                                    queryMode: 'local'
                                },
                                {
                                    xtype: 'container',
                                    colspan: 5,
                                    height: 30,
                                    layout: {
                                        type: 'hbox',
                                        align: 'stretch',
                                        pack: 'center'
                                    },
                                    items: [
                                        {
                                            xtype: 'button',
                                            itemId: 'btnUpdate',
                                            text: 'Update',
                                            listeners: {
                                                click: {
                                                    fn: me.onBtnUpdateClick,
                                                    scope: me
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            height: 30,
                            layout: {
                                type: 'hbox',
                                align: 'stretch',
                                pack: 'center'
                            },
                            items: [
                                {
                                    xtype: 'displayfield',
                                    hidden: true,
                                    itemId: 'lblPosted',
                                    fieldLabel: '',
                                    value: 'POSTED'
                                }
                            ]
                        }
                    ],
                    listeners: {
                        afterrender: {
                            fn: me.onFrmMFLoanEditAfterRender,
                            scope: me
                        }
                    }
                }
            ]
        });

        me.callParent(arguments);
    },

    onTextfieldAfterRender: function(component, eOpts) {
        component.getEl().on('dblclick', function(){
            var winPopup = Ext.create('MyApp.view.SelectLoanNoPopup',{

            });

            winPopup.extraParam={param:null};
            winPopup.show();
        });

    },

    onDdlCenterCodeSelect: function(combo, records, eOpts) {
        console.log('records',records);
        var centerCode = records[0].data.CenterCode;
    },

    onTxtMemberCodeAfterRender: function(component, eOpts) {
        component.getEl().on('dblclick', function(){
            var winPopup = Ext.create('MyApp.view.SelectMemberLoanEditPopup',{

            });

            winPopup.extraParam={param:null};
            winPopup.show();
        });
    },

    onDdlLoanHeadingSelect: function(combo, records, eOpts) {
        var loanHeadingCode = records[0].data.LoanProductCode;
        var objLoanPurpose ={
            LoanProductCode :loanHeadingCode
        };



        Ext.Ajax.request({
                    url:'../Handlers/Finance/Maintenance/LoanPurposeHandler.ashx',
                    params:{method:'GetLoanPurpose1',sector:JSON.stringify(objLoanPurpose)
        },
                    success: function ( result, request ) {

                        var obj = Ext.decode(result.responseText);
                        if(obj.success === 'true'){
                            console.log("Resu",obj.root);
                            var store =Ext.getStore('LoanPurposeStore1');
                            store.removeAll();
                            store.add(obj.root);


                        }else{msg('FAILURE','Could Not Load Data');}
                    },
                    failure: function(form, action) {
                        msg("FAILURE","Could Not Load Data");    }
                });
    },

    onBtnUpdateClick: function(button, e, eOpts) {
         var obj ={
         LoanDate :Ext.ComponentQuery.query('#txtLoanDateAD')[0].getValue(),
         LoanMaturity_Date :Ext.ComponentQuery.query('#txtMaturityDateAD')[0].getValue(),
         LoanProduct_Code :Ext.ComponentQuery.query('#ddlLoanHeading')[0].getValue(),
         ClientNo : Ext.ComponentQuery.query('#txtLoanNo')[0].ClientNo,
         LoanPurpose_Code :Ext.ComponentQuery.query('#ddlLoanPurpose')[0].getValue(),
         ApprovedLoan_Amount :Ext.ComponentQuery.query('#txtAppLoanAmt')[0].getValue(),
         TotalLoan_Amount :Ext.ComponentQuery.query('#txtTotalLoanTaken')[0].getValue(),
         LoanPeriod_Type :Ext.ComponentQuery.query('#ddlLoanPeriod')[0].getValue(),
         LoanPeriod :Ext.ComponentQuery.query('#txtLoanPeriod')[0].getValue(),
         GraceDays :Ext.ComponentQuery.query('#txtGraceDays')[0].getValue(),
         EmployeeId :Ext.ComponentQuery.query('#txtFieldAssistantCode')[0].getValue(),
         InterestRate :Ext.ComponentQuery.query('#txtInterestRate')[0].getValue(),
         InterestCalc_Method :Ext.ComponentQuery.query('#ddlInterestCalcMethod')[0].getValue(),
         //LoanClose_Date :Ext.ComponentQuery.query('#')[0].getValue(),
         LoanStatus :Ext.ComponentQuery.query('#ddlLoanStatus')[0].getValue(),
         //Rating :Ext.ComponentQuery.query('#')[0].getValue(),
         InstallmentAmount :Ext.ComponentQuery.query('#txtInstallmentAmt')[0].getValue(),
         //RefAccount_No :Ext.ComponentQuery.query('#')[0].getValue(),
         InstallmentPeriod_Type :Ext.ComponentQuery.query('#ddlInstallmentFrequency')[0].getValue(),
         InstallmentPeriod :Ext.ComponentQuery.query('#txtInstallmentFrequency')[0].getValue(),
         PrincipalArrear :0,//Ext.ComponentQuery.query('#')[0].getValue(),
         PrincipalAmount :0,//Ext.ComponentQuery.query('#txtFixedPrincipleAmt')[0].getValue(),
         YearNo :Ext.ComponentQuery.query('#txtLoanYear')[0].getValue(),
         WithdrawalNo :0,//Ext.ComponentQuery.query('#')[0].getValue(),
         ChkAdjust_Saving :Ext.ComponentQuery.query('#chkAdjustSaving')[0].getValue(),
         SavingAccount_No :Ext.ComponentQuery.query('#ddlAdjustSaving')[0].getValue(),
         InsurancePolicy_No :Ext.ComponentQuery.query('#txtPolicyNo')[0].getValue(),
         TranOffice_Code :getOfficeCode(),
         FixedPrincipal_Amount :Ext.ComponentQuery.query('#txtFixedPrincipleAmt')[0].getValue(),
         FirstInstall_Date :Ext.ComponentQuery.query('#txt1stInstallDateAD')[0].getValue(),
         ClientCenter :Ext.ComponentQuery.query('#ddlCenterCode')[0].getValue(),
         FixedInterest_Amount :Ext.ComponentQuery.query('#txtFixedInterestAmt')[0].getValue(),
         ContraAccount :Ext.ComponentQuery.query('#ddlContraAcc')[0].getValue(),
         //Deduction1Code :Ext.ComponentQuery.query('#')[0].getValue(),
         //Deduction1Desc :'Deduction1',//Ext.ComponentQuery.query('#')[0].getValue(),
         //DeductionAmount1 :Ext.ComponentQuery.query('#')[0].getValue(),
         //Deduction2Code :Ext.ComponentQuery.query('#')[0].getValue(),
         //Deduction2Desc :'Deduction2',//Ext.ComponentQuery.query('#')[0].getValue(),
         //DeductionAmount2 :Ext.ComponentQuery.query('#')[0].getValue(),
         //Deduction3Code :Ext.ComponentQuery.query('#')[0].getValue(),
         //Deduction3Desc :'Deduction3',//Ext.ComponentQuery.query('#')[0].getValue(),
         //DeductionAmount3 :Ext.ComponentQuery.query('#')[0].getValue(),
         //Deduction4Code :Ext.ComponentQuery.query('#')[0].getValue(),
        // Deduction4Desc :'Deduction4',//Ext.ComponentQuery.query('#')[0].getValue(),
         //DeductionAmount4 :Ext.ComponentQuery.query('#')[0].getValue(),
         NoOf_Installment :Ext.ComponentQuery.query('#txtNoOfInstallments')[0].getValue(),
         //FundingAgency_Code :Ext.ComponentQuery.query('#')[0].getValue(),
         User1 :getCurrentUser(),
         InsertUpdate :'U',
         OutFiscal_Year:getFiscalYear(),
         //OutLoan_No:Ext.ComponentQuery.query('#txtLoanNo')[0].LoanNo,
         //OutLoan_Dno: Ext.ComponentQuery.query('#txtLoanNo')[0].LoanDno


         };

         var waitSave = watiMsg('Saving. Please wait ...');
        Ext.Ajax.request({
             url:'../Handlers/Finance/Transaction/LoanTransaction/LoanHandler.ashx',
             params:{method:'Save', loan:JSON.stringify(obj)},
             success: function ( result, request ) {
        waitSave.hide();
                  var out = Ext.decode(result.responseText);
        				if(out.success==='true'){
        					msg('SUCCESS',out.message);
        						}

        				else{msg('FAILURE',out.message);


                  }
             },
             failure: function(form, action) {
        waitSave.hide();var out=Ext.decode(response.responseText);msg('FAILURE',out.message);     }
        });

    },

    onFrmMFLoanEditAfterRender: function(component, eOpts) {
        Ext.ComponentQuery.query('#txtLoanDateBS')[0].setValue(getMisDateBS());
        Ext.ComponentQuery.query('#txtLoanDateAD')[0].setValue(getMisDateAD());


        //GET FOR CENTER

        Ext.Ajax.request({
                            url:'../Handlers/Finance/Maintenance/CenterHandler.ashx',
                            params:{method:'GetCenterList',offCode:getOfficeCode(), centerName: null
                },
                            success: function ( result, request ) {

                                var obj = Ext.decode(result.responseText);
                                if(obj.success === 'true'){
                                    //console.log("Resu",obj.root);
                                    var store =Ext.getStore('CenterCodeStore');
                                    store.removeAll();
                                    store.add(obj.root);



                                }else{msg('FAILURE','Could Not Load Data');}
                            },
                            failure: function(form, action) {
                                msg("FAILURE","Could Not Load Data");    }
            });

        //GET FOR LOAN HEADING

        Ext.Ajax.request({
            url:'../Handlers/Finance/Transaction/LoanTransaction/LoanProductHandler.ashx',
            params:{method:'GetLoanProduct', productName: null
                   },
            success: function ( result, request ) {

                var obj = Ext.decode(result.responseText);
                if(obj.success === 'true'){
                    console.log("Resu",obj.root);
                    var store =Ext.getStore('LoanProductCodeStore1');
                    store.removeAll();
                    store.add(obj.root);


                }else{msg('FAILURE','Could Not Load Data');}
            },
            failure: function(form, action) {
                msg("FAILURE","Could Not Load Data");    }
        });


        //GET FOR INSTALLMENT TYPE

        Ext.Ajax.request({
                            url:'../Handlers/GeneralMasterParameters/References/MsRefrenceCodeDetailsHandler.ashx',
                            params:{method:'GetReferenceDetailListShort',referenceCode:'INSTALLMENT_PERIOD_TYPE'
                },
                            success: function ( result, request ) {

                                var obj = Ext.decode(result.responseText);
                                if(obj.success === 'true'){
                                    console.log("Resu",obj.root);
                                    var store =Ext.getStore('InstallmentTypeRefShortStore');
                                    store.removeAll();
                                    store.add(obj.root);



                                }else{msg('FAILURE','Could Not Load Data');}
                            },
                            failure: function(form, action) {
                                msg("FAILURE","Could Not Load Data");    }
                        });

        //GET FOR Interest calc Method

        Ext.Ajax.request({
                            url:'../Handlers/GeneralMasterParameters/References/MsRefrenceCodeDetailsHandler.ashx',
                            params:{method:'GetReferenceDetailListShort',referenceCode:'LOAN_INTEREST_CALC_METHOD'
                },
                            success: function ( result, request ) {

                                var obj = Ext.decode(result.responseText);
                                if(obj.success === 'true'){
                                    console.log("Resu",obj.root);
                                    var store =Ext.getStore('InterestCalcMethodStore');
                                    store.removeAll();
                                    store.add(obj.root);



                                }else{msg('FAILURE','Could Not Load Data');}
                            },
                            failure: function(form, action) {
                                msg("FAILURE","Could Not Load Data");    }
            });
        //GET FOR Loan Status
        Ext.Ajax.request({
                            url:'../Handlers/GeneralMasterParameters/References/MsRefrenceCodeDetailsHandler.ashx',
                            params:{method:'GetReferenceDetailListShort',referenceCode:'LOAN_STATUS'
                },
                            success: function ( result, request ) {

                                var obj = Ext.decode(result.responseText);
                                if(obj.success === 'true'){
                                    console.log("Resu",obj.root);
                                    var store =Ext.getStore('LoanStatusStore');
                                    store.removeAll();
                                    store.add(obj.root);



                                }else{msg('FAILURE','Could Not Load Data');}
                            },
                            failure: function(form, action) {
                                msg("FAILURE","Could Not Load Data");    }
            });

        //GET FOR Loan Period in Mon/Yrs
        Ext.Ajax.request({
                            url:'../Handlers/GeneralMasterParameters/References/MsRefrenceCodeDetailsHandler.ashx',
                            params:{method:'GetReferenceDetailListShort',referenceCode:'LOAN_PERIOD_TYPE'
                },
                            success: function ( result, request ) {

                                var obj = Ext.decode(result.responseText);
                                if(obj.success === 'true'){
                                    console.log("Resu",obj.root);
                                    var store =Ext.getStore('LoanPeriodMYStore');
                                    store.removeAll();
                                    store.add(obj.root);



                                }else{msg('FAILURE','Could Not Load Data');}
                            },
                            failure: function(form, action) {
                                msg("FAILURE","Could Not Load Data");    }
            });
        //get for contra account
        Ext.Ajax.request({
                            url:'../Handlers/Finance/Maintenance/AccountHeadEntryHandler.ashx',
                            params:{method:'GetContraAccount',offCode:getOfficeCode(), accountDesc:null
                },
                            success: function ( result, request ) {

                                var obj = Ext.decode(result.responseText);
                                if(obj.success === 'true'){
                                    console.log("Resu",obj.root);
                                    var store =Ext.getStore('ContraAccountStore');
                                    store.removeAll();
                                    store.add(obj.root);
                                    //Ext.ComponentQuery.query('#ddlContraAccount')[0].select('100000021000002');



                                }else{msg('FAILURE','Could Not Load Data');}
                            },
                            failure: function(form, action) {
                                msg("FAILURE","Could Not Load Data");    }
                        });
        /*
        //get for adjust saving



        Ext.Ajax.request({
                            url:'../Handlers/Finance/Transaction/LoanTransaction/MfAdjustSavingHandler.ashx',
                            params:{method:'GetMfAdjustSaving',offCode:getOfficeCode(),clientNo:null,productName :null
                },
                            success: function ( result, request ) {

                                var obj = Ext.decode(result.responseText);
                                if(obj.success === 'true'){
                                    console.log("Resu",obj.root);
                                    var store =Ext.getStore('AdjustToSavingStore');
                                    store.removeAll();
                                    store.add(obj.root);



                                }else{msg('FAILURE','Could Not Load Data');}
                            },
                            failure: function(form, action) {
                                msg("FAILURE","Could Not Load Data");    }
                        });
        */
    }

});