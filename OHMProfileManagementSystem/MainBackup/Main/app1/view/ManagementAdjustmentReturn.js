/*
 * File: app/view/ManagementAdjustmentReturn.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.ManagementAdjustmentReturn', {
    extend: 'Ext.panel.Panel',

    height: 250,
    title: 'Management Adjustment Review',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    frame: true,
                    id: 'frmManagementAdjustmentReturn',
                    itemId: 'frmManagementAdjustmentReturn',
                    bodyPadding: 10,
                    items: [
                        {
                            xtype: 'gridpanel',
                            itemId: 'grdSuspendedReturns',
                            title: 'Suspended Returns',
                            store: 'MARSuspendedReturnsStore',
                            columns: [
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'PAN',
                                    text: 'PAN'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Taxyear',
                                    text: 'Tax Year'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'FilPeriod',
                                    text: 'Filing Period'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'Period',
                                    text: 'Period'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'AcctType',
                                    text: 'Account Type'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'SeqNo',
                                    text: 'Sequence No'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                        return '<span style="text-decoration:underline;color:blue">View</span>';
                                    },
                                    itemId: 'viewSuspendedReturns',
                                    text: 'View'
                                }
                            ],
                            selModel: Ext.create('Ext.selection.RowModel', {
                                listeners: {
                                    select: {
                                        fn: me.onRowselectionmodelSelect,
                                        scope: me
                                    }
                                }
                            })
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onRowselectionmodelSelect: function(rowmodel, record, index, eOpts) {
        //////////////grdModule goes here

        //console.log('suspended returns',record.data);
        var rtType=record.data.RTType;

        //alert(tranNo);
        var params={suspendedReturns:record.data,from:"MAR"};
        uiConfig = {menuLink:rtType=='RT'?'ManualVatReturns':'ManualCloseOfBusiness',pageTitle:'Management Adjustment Review'};
        DynamicUI(uiConfig,null,{params:params});


        //dynamicPopUp(mName,{params:params});


    }

});