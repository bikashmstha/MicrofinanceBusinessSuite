/*
 * File: app/view/ShwSubmissionNo.js
 *
 * This file was generated by Sencha Architect version 2.2.3.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.ShwSubmissionNo', {
    extend: 'Ext.form.Panel',

    frame: true,
    itemId: 'ShwSubmissionNo',
    layout: {
        columns: 1,
        type: 'table'
    },
    title: 'Your Submission No ',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'container',
                    items: [
                        {
                            xtype: 'label',
                            style: 'font-size:18px;color:red;',
                            text: 'Submission Number:-'
                        },
                        {
                            xtype: 'label',
                            id: 'SubmissionNoText',
                            itemId: 'SubmissionNoText',
                            style: 'font-size:18px;color:red;',
                            text: '660438234'
                        }
                    ]
                },
                {
                    xtype: 'label',
                    colspan: 1,
                    text: 'कृपया आफ्नो Username, Password र Submission Number सुरक्षित राख्नुहोस्। यहि Username र Password तपाईले आन्तरिक राजस्व विभागको अन्य E-SYSTEM हरु मा पनि प्रयोग गर्न सकिने छ। '
                },
                {
                    xtype: 'label',
                    text: 'सम्पूर्ण आवश्यक विवरण, फोटो र परिचयपत्र प्रविष्ट गरीसकेपछि सेभ र सबमिट Button थिच्नुहोस् र "Print Form" मा क्लिक गरी प्रिन्ट निकाल्नुहोस्। सोको एक प्रति वा Submission Number लिई सम्वन्धित आन्तकरिक राजस्व कार्यालयमा सम्पर्क गरी आफ्नो व्यक्तिगत/व्यवसाइक स्थायी लेखा नम्बर प्रमाणपत्र प्राप्त गर्नुहोस्।'
                },
                {
                    xtype: 'container',
                    height: 300,
                    margin: '10 0',
                    padding: 10,
                    width: 1000,
                    layout: {
                        type: 'vbox'
                    },
                    items: [
                        {
                            xtype: 'combobox',
                            itemId: 'Sub_No_BusinessType',
                            margin: 2,
                            fieldLabel: 'Business Type ',
                            labelWidth: 150,
                            emptyText: '--- Choose ---',
                            displayField: 'TaxPayerCatDescEng',
                            queryMode: 'local',
                            store: 'Sub_No_BusinessType',
                            valueField: 'TaxPayerCatId'
                        },
                        {
                            xtype: 'combobox',
                            itemId: 'Sub_No_BusinessubType',
                            margin: 2,
                            fieldLabel: 'Business Sub Type',
                            labelWidth: 150,
                            emptyText: '--- Choose ---',
                            displayField: 'DescEn',
                            queryMode: 'local',
                            store: 'Sub_No_BusinessSubType',
                            valueField: 'TaxPayerTyp'
                        },
                        {
                            xtype: 'textfield',
                            hidden: true,
                            itemId: 'Show_Sub_PartnerPan',
                            margin: 2,
                            fieldLabel: 'Partner\'s PAN No.'
                        },
                        {
                            xtype: 'button',
                            hidden: true,
                            itemId: 'Show_Sub_AddPan',
                            iconCls: 'icon-add',
                            text: 'Add'
                        },
                        {
                            xtype: 'gridpanel',
                            hidden: true,
                            itemId: 'Show_Sub_PanList',
                            width: 250,
                            title: 'Partner\'s PAN No. List',
                            store: 'Show_Sub_PartnerPanList',
                            columns: [
                                {
                                    xtype: 'gridcolumn',
                                    width: 200,
                                    dataIndex: 'PanNo',
                                    text: 'PanNo'
                                },
                                {
                                    xtype: 'actioncolumn',
                                    iconCls: 'icon-ok',
                                    items: [
                                        {
                                            handler: function(view, rowIndex, colIndex, item, e) {
                                                alert('handler');
                                                var store=Ext.ComponentQuery.query('#Show_Sub_PanList')[0].getStore();
                                                store.removeAt(rowIndex);
                                            },
                                            iconCls: ''
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'radiogroup',
                            hidden: true,
                            itemId: 'Show_Sub_No_HavePan',
                            width: 260,
                            fieldLabel: 'Do you already have PAN ? ',
                            labelAlign: 'top',
                            labelSeparator: ' ',
                            allowBlank: false,
                            items: [
                                {
                                    xtype: 'radiofield',
                                    itemId: 'havePanY',
                                    name: 'havePan',
                                    value: 'Y',
                                    boxLabel: 'Yes'
                                },
                                {
                                    xtype: 'radiofield',
                                    itemId: 'havePanN',
                                    name: 'havePan',
                                    value: 'N',
                                    boxLabel: 'No',
                                    checked: true
                                }
                            ]
                        },
                        {
                            xtype: 'textfield',
                            formBind: false,
                            hidden: true,
                            itemId: 'Show_Sub_No_PanNo',
                            margin: 2,
                            fieldLabel: 'Pan No. ',
                            msgTarget: 'side',
                            blankText: 'Pan No. is required'
                        },
                        {
                            xtype: 'container',
                            items: [
                                {
                                    xtype: 'button',
                                    id: 'btnMovePersonaEpan',
                                    itemId: 'btnMovePersonaEpan',
                                    margin: 2,
                                    text: 'Continue'
                                },
                                {
                                    xtype: 'button',
                                    margin: 2,
                                    text: 'Cancel'
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'hiddenfield',
                    itemId: 'Show_SubNo_hdnRegFor',
                    fieldLabel: 'Label'
                }
            ],
            listeners: {
                afterrender: {
                    fn: me.onShwSubmissionNoAfterRender,
                    scope: me
                }
            }
        });

        me.callParent(arguments);
    },

    onShwSubmissionNoAfterRender: function(component, eOpts) {
        var store=Ext.getStore('Sub_No_BusinessType');
        store.removeAll();


        Ext.Ajax.request({
            url: '../Handlers/Common/TaxPayerCategoriesHandler.ashx?Method=LoadTaxPayerCategories',
            params:{},
            success: function ( result, request ) {
                var data = Ext.decode(result.responseText); 
                if(data.root)
                {   
                    store.loadData(data.root);
                    /* store.filter(function(item){
                    return (item.get("TaxPayerCatDescEng") != 'TDS') && (item.get("TaxPayerCatDescEng") != 'Personal Pan'); 
                    });
                    */
                }

            },
            failure: function ( result, request ) {
                statuBar.close();
                Ext.Msg.show({
                    title: 'Failure',
                    msg: 'ERROR OCURRED !!!' ,
                    buttons: Ext.MessageBox.OK,
                    icon:Ext.Msg.ERROR
                });
            }

        });

    }

});