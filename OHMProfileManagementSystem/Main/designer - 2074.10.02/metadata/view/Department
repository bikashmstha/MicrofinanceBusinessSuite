{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Department",
        "frame": true,
        "title": "Department"
    },
    "configAlternates": {
        "designer|userClassName": "string",
        "frame": "boolean",
        "title": "string"
    },
    "name": "MyPanel17",
    "designerId": "aaad7849-edba-4b6a-aa92-072efbce5cbb",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "frame": true,
                "itemId": "frmDepartment"
            },
            "configAlternates": {
                "bodyPadding": "auto",
                "frame": "boolean",
                "itemId": "string"
            },
            "name": "MyForm8",
            "designerId": "72a81b06-e1c1-4770-83fa-e6c34c012c28",
            "cn": [
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "grdDepartment",
                        "store": "DepartmentStore",
                        "title": "Departments"
                    },
                    "configAlternates": {
                        "title": "string",
                        "store": "store",
                        "itemId": "string"
                    },
                    "name": "MyGridPanel11",
                    "designerId": "0aa1c5b7-6dae-436a-ade6-10d065060caa",
                    "cn": [
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyGridView10",
                            "designerId": "93629a94-97af-416d-8289-f1b8f3349c3a"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "DeptCode",
                                "text": "Department Code"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string"
                            },
                            "name": "MyColumn109",
                            "designerId": "4438c3ef-056b-4053-b614-79613785c0d2",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "editor",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "itemId": "txtDepartmentCode"
                                    },
                                    "configAlternates": {
                                        "itemId": "string"
                                    },
                                    "name": "MyTextField174",
                                    "designerId": "5cdfbe2a-7c65-469e-8c0f-804533ff6e60"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "DeptName",
                                "text": "Department Name",
                                "width": 250
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn110",
                            "designerId": "6ebb6774-1975-4413-8ce3-de299b6c0ef0",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "editor",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "itemId": "txtDepartmentName"
                                    },
                                    "configAlternates": {
                                        "itemId": "string"
                                    },
                                    "name": "MyTextField175",
                                    "designerId": "9fff48fb-f951-4772-b84f-9463b1f087b1"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "ParentDeptCode",
                                "text": "Parent Department",
                                "width": 250
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn111",
                            "designerId": "406dbf94-3b58-42ae-bbf6-229fdded0c90",
                            "cn": [
                                {
                                    "type": "Ext.form.field.ComboBox",
                                    "reference": {
                                        "name": "editor",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "displayField": "DeptName",
                                        "forceSelection": true,
                                        "itemId": "ddlParentDepartment",
                                        "queryMode": "local",
                                        "store": "DepartmentShortStore",
                                        "valueField": "DeptCode"
                                    },
                                    "configAlternates": {
                                        "itemId": "string",
                                        "displayField": "datafield",
                                        "forceSelection": "boolean",
                                        "queryMode": "string",
                                        "store": "store",
                                        "valueField": "datafield"
                                    },
                                    "name": "MyComboBox15",
                                    "designerId": "763330bb-80fa-4145-aaba-7e1aabd386bb"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "Action",
                                "text": "Action"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string"
                            },
                            "name": "MyColumn112",
                            "designerId": "ef0bb382-5d49-453a-aed4-bacb87ef3de5",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "editor",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "itemId": "txtAction"
                                    },
                                    "configAlternates": {
                                        "itemId": "string"
                                    },
                                    "name": "MyTextField176",
                                    "designerId": "ef5f68b9-b1c0-431a-84a1-8d808d5310ea"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "delDepartment"
                            },
                            "configAlternates": {
                                "itemId": "string"
                            },
                            "name": "MyActionColumn17",
                            "designerId": "58c94161-1d12-49c3-ba9f-824c71f32dde",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "../ITS/resources/images/icons/cancel.png"
                                    },
                                    "configAlternates": {
                                        "icon": "string"
                                    },
                                    "name": "MyActionColumnItem16",
                                    "designerId": "0abbe9c9-dd77-48c3-869e-7ef4e7e4b90b",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var store = Ext.getStore('DepartmentStore');",
                                                    "var grd =  Ext.ComponentQuery.query('#grdDepartment')[0];",
                                                    "var row = store.getAt(rowIndex).data;",
                                                    "",
                                                    "Ext.Msg.confirm('Confirm Action', 'Do you want to Remove the selected Account Category ?', function(btn) {",
                                                    "    if(btn == 'yes'){",
                                                    "",
                                                    "        /*",
                                                    "        nepaliDateConversion.FiscalYear, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_MONTH_CODE\", nepaliDateConversion.MonthCode, OracleDbType.Int16, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_ENGLISH_START_DATE\", nepaliDateConversion.EnglishStartDate, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_NEPALI_START_DATE\", nepaliDateConversion.NepaliStartDate, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_ENGLISH_END_DATE\", nepaliDateConversion.EnglishEndDate, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_NEPALI_END_DATE\", nepaliDateConversion.NepaliEndDate, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_NEPALI_YEAR\", nepaliDateConversion.NepaliYear, OracleDbType.Int16, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_NEPALI_PERIOD\", nepaliDateConversion.NepaliPeriod, OracleDbType.Int16, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_NO_OF_DAYS_IN_MONTH\", nepaliDateConversion.NoOfDays, OracleDbType.Int16, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_CREATED_MODIFIED_ON\", nepaliDateConversion.CreatedOn, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_CREATED_MODIFIED_BY\", nepaliDateConversion.CreatedBy, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_INSERT_UPDATE\", nepaliDateConversion.Action, OracleDbType.Varchar2, ParameterDirection.Input));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_OUT_RESULT_CODE\", null, OracleDbType.Varchar2, ParameterDirection.Output));",
                                                    "            paramList.Add(SqlHelper.GetOraParam(\":P_OUT_RESULT_DESC\", null, OracleDbType.",
                                                    "            */",
                                                    "        var rec={DeptCode:row.DeptCode,",
                                                    "         DeptName:row.DeptName,",
                                                    "         ParentDeptCode:row.ParentDeptCode,",
                                                    "         Action:'D'};",
                                                    "",
                                                    "        var wMsg='Deleting....';",
                                                    "",
                                                    "        var waitSave = watiMsg(wMsg);",
                                                    "",
                                                    "        Ext.Ajax.request({",
                                                    "            url: '../Handlers/GeneralMasterParameters/Maintenance/DepartmentHandler.ashx',",
                                                    "            params: {",
                                                    "                method:'Save',",
                                                    "                department:JSON.stringify(rec)",
                                                    "            },",
                                                    "                success: function(response){",
                                                    "                    waitSave.hide();",
                                                    "                    var out=Ext.decode(response.responseText);",
                                                    "                    console.log(out);",
                                                    "",
                                                    "                    if(out.success===\"true\")",
                                                    "                        {",
                                                    "                            var message=out.root;",
                                                    "                                    msg(\"SUCCESS\",out.message,function(){",
                                                    "                                        grd.bindStore(store);",
                                                    "                                        store.removeAt(rowIndex);",
                                                    "                                    });",
                                                    "",
                                                    "",
                                                    "",
                                                    "                            ",
                                                    "                        }",
                                                    "                        else",
                                                    "                            {",
                                                    "                                msg(\"FAILURE\",out.message);",
                                                    "                            }",
                                                    "                    },",
                                                    "                    failure: function ( result, request ) {",
                                                    "                        waitSave.hide();",
                                                    "                        var out=Ext.decode(response.responseText);",
                                                    "                        msg(\"FAILURE\",out.message);",
                                                    "                    }",
                                                    "",
                                                    "                });",
                                                    "",
                                                    "",
                                                    "",
                                                    "        return true;",
                                                    "    }",
                                                    "});"
                                                ]
                                            },
                                            "configAlternates": {
                                                "designer|params": "typedarray",
                                                "fn": "string",
                                                "implHandler": "code"
                                            },
                                            "name": "handler",
                                            "designerId": "2f02dbb5-3254-4188-ae78-e0db3d86f0cd"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.selection.RowModel",
                            "reference": {
                                "name": "selModel",
                                "type": "object"
                            },
                            "codeClass": "Ext.selection.RowModel",
                            "name": "MyRowSelectionModel11",
                            "designerId": "daff7b39-2de8-47a4-8f68-9dd38f0acf6c"
                        },
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "top"
                            },
                            "configAlternates": {
                                "dock": "string"
                            },
                            "name": "MyToolbar15",
                            "designerId": "9e55d847-da12-4a3f-9561-64e5bac0001f",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "itemId": "btnAddDepartment",
                                        "layout|flex": null,
                                        "text": "Add Department"
                                    },
                                    "configAlternates": {
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string"
                                    },
                                    "name": "MyButton30",
                                    "designerId": "23f0ae66-2dc5-4437-9e26-9a86203602f5",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnAddDepartmentClick",
                                                "implHandler": [
                                                    "var store =Ext.getStore('DepartmentStore');",
                                                    "var rec={DeptCode:'',",
                                                    "         DeptName:'',",
                                                    "         ParentDeptCode:'',",
                                                    "         Action:'I'};",
                                                    "store.add(rec);",
                                                    ""
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "name": "string",
                                                "scope": "string",
                                                "implHandler": "code"
                                            },
                                            "name": "onBtnAddDepartmentClick",
                                            "designerId": "d1a958c3-8c2e-4b3b-8f7d-b414988d285f"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.plugin.RowEditing",
                            "reference": {
                                "name": "plugins",
                                "type": "array"
                            },
                            "codeClass": "Ext.grid.plugin.RowEditing",
                            "name": "MyRowEditingPlugin15",
                            "designerId": "5b660af2-1b74-4952-aeb1-6254c2e0ede2",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onRowEditingValidateedit",
                                        "implHandler": [
                                            "var errMsg='';",
                                            "var departmentCode=Ext.ComponentQuery.query('#txtDepartmentCode')[0];",
                                            "var departmentName=Ext.ComponentQuery.query('#txtDepartmentName')[0];",
                                            "var parentDepartment=Ext.ComponentQuery.query('#ddlParentDepartment')[0];",
                                            "var action=Ext.ComponentQuery.query('#txtAction')[0];",
                                            "",
                                            "if(departmentCode.getValue()===null ||departmentCode.getValue()===\"\")",
                                            "    {",
                                            "        errMsg+=\"Please,Enter Department Code.\";",
                                            "    }",
                                            "if(departmentName.getValue()===null ||departmentName.getValue()===\"\")",
                                            "    {",
                                            "        errMsg+=\"Please,Enter Department Name.\";",
                                            "    }",
                                            "/*if(parentDepartment.getValue()===null ||parentDepartment.getValue()===\"\")",
                                            "    {",
                                            "        errMsg+=\"Please,Select Parent Department.\";",
                                            "    }",
                                            "*/",
                                            "if(errMsg!=='')",
                                            "    {",
                                            "        msg(\"WARNING\",errMsg);",
                                            "        return;",
                                            "    }",
                                            "/*",
                                            "p_category_no                               IN           NUMBER,",
                                            "                                 p_category_desc                             IN           VARCHAR2,",
                                            "                                 p_category_initial                          IN           VARCHAR2,",
                                            "                                 p_tran_office_code                          IN           VARCHAR2,       */",
                                            "",
                                            "var rec={DeptCode:departmentCode.getValue(),",
                                            "         DeptName:departmentName.getValue(),",
                                            "         ParentDeptCode:parentDepartment.getValue(),",
                                            "         Action:action.getValue()};",
                                            "",
                                            "",
                                            "",
                                            "var wMsg='';",
                                            "if(action.getValue()==='I')",
                                            "    {",
                                            "        wMsg='Inserting....';",
                                            "    }",
                                            "else",
                                            "    {",
                                            "        wMsg='Updating....';",
                                            "    }",
                                            "var waitSave = watiMsg(wMsg);",
                                            "",
                                            "Ext.Ajax.request({",
                                            "            url: '../Handlers/GeneralMasterParameters/Maintenance/DepartmentHandler.ashx',",
                                            "            params: {",
                                            "                method:'Save',",
                                            "                department:JSON.stringify(rec)",
                                            "            },",
                                            "            success: function(response){",
                                            "            waitSave.hide();",
                                            "            var out=Ext.decode(response.responseText);",
                                            "            console.log(out);",
                                            "",
                                            "            if(out.success===\"true\")",
                                            "                {",
                                            "                    var message=out.root;",
                                            "                            msg(\"SUCCESS\",out.message,function(){",
                                            "                                var grd = Ext.ComponentQuery.query('#grdDepartment')[0];",
                                            "",
                                            "                                var record = grd.getSelectionModel().getSelection()[0];",
                                            "                                record.set('Action','U');",
                                            "",
                                            "                            });",
                                            "",
                                            "",
                                            "",
                                            "                    ",
                                            "                }",
                                            "                else",
                                            "                    {",
                                            "                        msg(\"FAILURE\",out.message);",
                                            "                    }",
                                            "            },",
                                            "            failure: function ( result, request ) {",
                                            "                waitSave.hide();",
                                            "                var out=Ext.decode(response.responseText);",
                                            "                msg(\"FAILURE\",out.message);",
                                            "            }",
                                            "",
                                            "        });",
                                            ""
                                        ],
                                        "name": "validateedit",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "implHandler": "code",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "onRowEditingValidateedit",
                                    "designerId": "9e52bda6-dd39-465f-93f2-8fe22c400d23"
                                },
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onRowEditingCanceledit",
                                        "name": "canceledit",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "onRowEditingCanceledit",
                                    "designerId": "968af9b4-f8c7-4e89-8514-508bdfb17580"
                                }
                            ]
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onGrdDepartmentBeforeRender",
                                "implHandler": [
                                    "var grid = Ext.ComponentQuery.query('#grdDepartment')[0];",
                                    "",
                                    "        grid.columns[2].renderer = function(value, metaData, record, rowIndex, colIndex, store, view) {",
                                    "            var temp=\"\";   ",
                                    "",
                                    "",
                                    "            var items=Ext.getStore('DepartmentStore').data.items;",
                                    "",
                                    "",
                                    "            for(var i=0;i<items.length;i++)",
                                    "            {",
                                    "",
                                    "                if(items[i].data.DeptCode==value)",
                                    "                {",
                                    "                    temp=items[i].data.DeptName;",
                                    "                    break;",
                                    "                }       ",
                                    "            }",
                                    "",
                                    "",
                                    "            return temp;",
                                    "        };"
                                ],
                                "name": "beforerender",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onGrdDepartmentBeforeRender",
                            "designerId": "5884c799-4578-4ab4-b91c-a4b9b4a4f402"
                        }
                    ]
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onFrmDepartmentAfterRender",
                        "implHandler": [
                            "var store=Ext.getStore('DepartmentShortStore');",
                            "var departmentStore=Ext.getStore('DepartmentStore');",
                            "",
                            "",
                            "var wMsg='Please, Wait....';",
                            "",
                            "var waitGet = watiMsg(wMsg);",
                            "",
                            "",
                            "store.removeAll();",
                            "",
                            "Ext.Ajax.request({",
                            "    url: '../Handlers/GeneralMasterParameters/Maintenance/DepartmentHandler.ashx',",
                            "    params: {",
                            "        method:'Get'",
                            "    },",
                            "    success: function(response){",
                            "    waitGet.hide();",
                            "    var data=Ext.decode(response.responseText);",
                            "    store.removeAll();",
                            "    store.add(data.root);",
                            "        ",
                            "        departmentStore.removeAll();",
                            "        departmentStore.add(data.root);",
                            "",
                            "",
                            "}",
                            "});",
                            ""
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "name": "string",
                        "scope": "string",
                        "implHandler": "code"
                    },
                    "name": "onFrmDepartmentAfterRender",
                    "designerId": "29046b11-95e9-4d60-b1c2-57859b372a75"
                }
            ]
        }
    ]
}