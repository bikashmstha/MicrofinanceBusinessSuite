{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "CompulsoryAccountEntry",
        "stores": [
            "CompulsaryAccountDetailsStore",
            "ProductTypeStore"
        ]
    },
    "configAlternates": {
        "designer|userClassName": "string",
        "stores": "typedarray"
    },
    "name": "MyController",
    "designerId": "1e34c30b-dfbc-4006-8289-718cbc710cbb",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnCreateCompulsaryAcc",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "MyButton8",
                "fn": "onBtnCreateCompulsaryAccClick",
                "implHandler": [
                    "var objCompulsoryAcc ={",
                    "CompulsoryAccountDesc:Ext.ComponentQuery.query('#txtCompulsoryAccDesc')[0].getValue(),",
                    "ProductCode:Ext.ComponentQuery.query('#ddlSavingProductCode')[0].getValue(),",
                    "ProductType:Ext.ComponentQuery.query('#ddlProductType')[0].getValue(),",
                    "ActiveFlag:Ext.ComponentQuery.query('#chkActive')[0].getValue()?'Y':'N',",
                    "Action:'I',",
                    "ProductName:Ext.ComponentQuery.query('#ddlSavingProductCode')[0].getRawValue()",
                    "",
                    "",
                    "};",
                    "",
                    "",
                    "var waitSave = watiMsg('Saving .Please wait ...');",
                    "Ext.Ajax.request({",
                    "    url:'../Handlers/Finance/Maintenance/CompulsoryAccountsEntryHandler.ashx',",
                    "    params:{method:'Save',CompulsoryAccountsEntry:JSON.stringify(objCompulsoryAcc)},",
                    "    success: function ( result, request ) {",
                    "        waitSave.hide();",
                    "        var out = Ext.decode(result.responseText);",
                    "        if(out.success==='true'){",
                    "",
                    "",
                    "          var store = Ext.getStore('CompulsaryAccountDetailsStore');",
                    "            var compulsoryAccountCode = out.root[0].CompulsoryAccountCode;",
                    "            Ext.ComponentQuery.query('#txtSymbolNo')[0].setValue(compulsoryAccountCode);",
                    "",
                    "                store.add(out.root);",
                    "            msg('SUCCESS',out.message,function(){",
                    "",
                    "            });",
                    "        }",
                    "",
                    "        else{msg('FAILURE',out.message);",
                    "",
                    "",
                    "            }",
                    "    },",
                    "    failure: function(form, action) {",
                    "        waitSave.hide();var out=Ext.decode(response.responseText);msg('FAILURE',out.message);     }",
                    "});",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string",
                "designer|controlQuery": "string",
                "designer|params": "typedarray",
                "designer|targetType": "view"
            },
            "name": "onBtnCreateCompulsaryAccClick",
            "designerId": "70bbbf9d-af1c-47bc-900b-9b026dd8dc01"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnUpdateCompulsoryAcc",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "MyButton50",
                "fn": "onBtnUpdateCompulsoryAccClick",
                "implHandler": [
                    "var objCompulsoryAcc ={",
                    "CompulsoryAccountDesc:Ext.ComponentQuery.query('#txtCompulsoryAccDesc')[0].getValue(),",
                    "ProductCode:Ext.ComponentQuery.query('#ddlSavingProductCode')[0].getValue(),",
                    "ProductType:Ext.ComponentQuery.query('#ddlProductType')[0].getValue(),",
                    "ActiveFlag:Ext.ComponentQuery.query('#chkActive')[0].getValue()?'Y':'N',",
                    "CompulsoryAccountCode: Ext.ComponentQuery.query('#txtSymbolNo')[0].getValue(),",
                    "Action:'U'",
                    "};",
                    "",
                    "",
                    "",
                    "",
                    "var waitSave = watiMsg('Saving .Please wait ...');",
                    "Ext.Ajax.request({",
                    "    url:'../Handlers/Finance/Maintenance/CompulsoryAccountsEntryHandler.ashx',",
                    "    params:{method:'Save',CompulsoryAccountsEntry:JSON.stringify(objCompulsoryAcc)},",
                    "    success: function ( result, request ) {",
                    "        waitSave.hide();",
                    "        var out = Ext.decode(result.responseText);",
                    "        if(out.success==='true'){",
                    "",
                    " var grd = Ext.ComponentQuery.query('#grdCompulsaryAccDetails')[0];",
                    "",
                    "var record = grd.getSelectionModel().getSelection()[0];",
                    "record.set('CompulsoryAccountDesc',Ext.ComponentQuery.query('#txtCompulsoryAccDesc')[0].getValue());",
                    "record.set('ProductCode',Ext.ComponentQuery.query('#ddlSavingProductCode')[0].getValue());",
                    "record.set('ProductType',Ext.ComponentQuery.query('#ddlProductType')[0].getValue());",
                    "record.set('ActiveFlag',Ext.ComponentQuery.query('#chkActive')[0].getValue()?'Y':'N');",
                    "record.set('CompulsoryAccountCode',Ext.ComponentQuery.query('#txtSymbolNo')[0].getValue());",
                    "record.set('Action','U');",
                    "record.set('ProductName',Ext.ComponentQuery.query('#ddlSavingProductCode')[0].getRawValue());",
                    "",
                    "",
                    "",
                    "            msg('SUCCESS',out.message,function(){",
                    "",
                    "            });",
                    "        }",
                    "",
                    "        else{msg('FAILURE',out.message);",
                    "",
                    "",
                    "            }",
                    "    },",
                    "    failure: function(form, action) {",
                    "        waitSave.hide();var out=Ext.decode(response.responseText);msg('FAILURE',out.message);     }",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string",
                "designer|controlQuery": "string",
                "designer|params": "typedarray",
                "designer|targetType": "view"
            },
            "name": "onBtnUpdateCompulsoryAccClick",
            "designerId": "42eb1ef6-55da-4524-b77c-daf0a198d722"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnDeleteCompulsoryAcc",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "MyButton51",
                "fn": "onBtnDeleteCompulsoryAccClick",
                "implHandler": [
                    "Ext.MessageBox.confirm('Delete Entry', 'Are you sure ?', function(btn){",
                    "",
                    "",
                    "    if(btn === 'yes'){",
                    "",
                    "",
                    "var objCompulsoryAcc ={",
                    "    compulsoryAccountCode : Ext.ComponentQuery.query('#txtSymbolNo')[0].getValue(),",
                    "CompulsoryAccountDesc:Ext.ComponentQuery.query('#txtCompulsoryAccDesc')[0].getValue(),",
                    "ProductCode:Ext.ComponentQuery.query('#ddlSavingProductCode')[0].getValue(),",
                    "ProductType:Ext.ComponentQuery.query('#ddlProductType')[0].getValue(),",
                    "ActiveFlag:Ext.ComponentQuery.query('#chkActive')[0].getValue()?'Y':'N',",
                    "Action:'D',",
                    "ProductName:Ext.ComponentQuery.query('#ddlSavingProductCode')[0].getRawValue()",
                    "",
                    "",
                    "};",
                    "",
                    "",
                    "var waitSave = watiMsg('Deleting Record .Please wait ...');",
                    "Ext.Ajax.request({",
                    "    url:'../Handlers/Finance/Maintenance/CompulsoryAccountsEntryHandler.ashx',",
                    "    params:{method:'Save',CompulsoryAccountsEntry:JSON.stringify(objCompulsoryAcc)},",
                    "    success: function ( result, request ) {",
                    "        waitSave.hide();",
                    "        var out = Ext.decode(result.responseText);",
                    "        if(out.success==='true'){",
                    "",
                    "var frm = Ext.ComponentQuery.query('#frmCompulsaryAccountEntry')[0].getForm();",
                    "              frm.clear();",
                    "          var store = Ext.getStore('CompulsaryAccountDetailsStore');",
                    "            var compulsoryAccountCode = out.root[0].CompulsoryAccountCode;",
                    "            //Ext.ComponentQuery.query('#txtSymbolNo')[0].setValue(compulsoryAccountCode);",
                    "",
                    "                store.removeAt(Ext.ComponentQuery.query('#grdCompulsaryAccDetails')[0].index);",
                    "            msg('SUCCESS',out.message,function(){",
                    "",
                    "            });",
                    "        }",
                    "",
                    "        else{msg('FAILURE',out.message);",
                    "",
                    "",
                    "            }",
                    "    },",
                    "    failure: function(form, action) {",
                    "        waitSave.hide();var out=Ext.decode(response.responseText);msg('FAILURE',out.message);     }",
                    "});",
                    "",
                    "",
                    "   }",
                    "   else",
                    "   {",
                    "",
                    "   }",
                    "",
                    "});",
                    "",
                    "",
                    "",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string",
                "designer|controlQuery": "string",
                "designer|params": "typedarray",
                "designer|targetType": "view"
            },
            "name": "onBtnDeleteCompulsoryAccClick",
            "designerId": "a4599b5f-2354-4a1a-aa0d-16f3dd98ee7a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#frmCompulsaryAccountEntry",
                "designer|params": [
                    "component",
                    "eOpts"
                ],
                "designer|targetType": "MyForm2",
                "fn": "onFrmCompulsaryAccountEntryAfterRender",
                "implHandler": [
                    "var waitSave = watiMsg('Loading Data Please wait ...');",
                    "",
                    "var abbsTypeStore=Ext.getStore('ReferenceShortStore');",
                    "abbsTypeStore.removeAll();",
                    "",
                    "Ext.Ajax.request({",
                    "    url: '../Handlers/GeneralMasterParameters/References/MsRefrenceCodeDetailsHandler.ashx',",
                    "    params: {",
                    "        method:'GetReferenceDetailListShort',referenceCode:'COMPULSARY_AC_PRODUCT_TYPE'",
                    "    },",
                    "    success: function(response){",
                    "",
                    "    var data=Ext.decode(response.responseText);",
                    "    abbsTypeStore.removeAll();",
                    "    abbsTypeStore.add(data.root);",
                    "",
                    "",
                    "}",
                    "});",
                    "",
                    "",
                    "Ext.Ajax.request({",
                    "    url:'../Handlers/Finance/Transaction/SavingTransaction/SavingProductHandler.ashx',",
                    "    params:{method:'GetSavingProduct',",
                    "           },",
                    "    success: function ( result, request ) {",
                    "",
                    "        var obj = Ext.decode(result.responseText);",
                    "        if(obj.success === 'true'){",
                    "            console.log(\"Resu\",obj.root);",
                    "            var store =Ext.getStore('ProductTypeStore');",
                    "            store.removeAll();",
                    "            store.add(obj.root);",
                    "",
                    "",
                    "        }else{msg('FAILURE','Could Not Load Data');}",
                    "    },",
                    "    failure: function(form, action) {",
                    "        msg(\"FAILURE\",\"Could Not Load Data\");    }",
                    "});",
                    "",
                    "Ext.Ajax.request({",
                    "    url:'../Handlers/Finance/Maintenance/CompulsoryAccountsEntryHandler.ashx',",
                    "    params:{method:'Get',",
                    "           },",
                    "    success: function ( result, request ) {",
                    "",
                    "        var obj = Ext.decode(result.responseText);",
                    "        if(obj.success === 'true'){",
                    "            console.log(\"Resu\",obj.root);",
                    "            var store =Ext.getStore('CompulsaryAccountDetailsStore');",
                    "            store.removeAll();",
                    "            store.add(obj.root);",
                    "            waitSave.hide();",
                    "",
                    "        }else{msg('FAILURE','Could Not Load Data');}",
                    "    },",
                    "    failure: function(form, action) {",
                    "        msg(\"FAILURE\",\"Could Not Load Data\");    }",
                    "});",
                    ""
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string",
                "designer|controlQuery": "string",
                "designer|params": "typedarray",
                "designer|targetType": "view"
            },
            "name": "onFrmCompulsaryAccountEntryAfterRender",
            "designerId": "6f51e60b-988f-480a-ae1a-3e87b969d319"
        }
    ]
}