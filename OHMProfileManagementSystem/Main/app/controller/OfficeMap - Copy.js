/*
 * File: app/controller/OfficeMap.js
 *
 * This file was generated by Sencha Architect version 4.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.OfficeMap', {
    extend: 'Ext.app.Controller',

    stores: [
        'OfficeMapStore',
        'OfficeMapGroupSearchStore',
        'OfficeMapCodeSearchStore'
    ],

    onBtnInsertOfficeGroupClick: function(button, e, eOpts) {
        var strMsgCode='';
        var strMsgDesc='';

        var officeCode=Ext.ComponentQuery.query('#txtSearchOfficeCode')[0];
        var officeGrpCode=Ext.ComponentQuery.query('#txtSearchOfficeGroupCode')[0];
        var createdBy='demo';
        var createdOn='12/12/2017';
        var resultCode='';
        var resultMsg='';


        var officeMap={

            OfficeCode :officeCode.getValue(),
            OfficeGrpCode :officeGrpCode.getValue(),
            CreatedBy :createdBy,
            CreatedDate :createdOn,
            Action :'I',

        };

        var waitSave = watiMsg("Saving Office .Please wait ...");
        Ext.Ajax.request({
             url: '../Handlers/GeneralMasterParameters/Office/OfficeMapHandler.ashx',
             params:{method:'Save',officeMap:JSON.stringify(officeMap)},
             success: function ( response, request ) {
                         waitSave.hide();
                            var out=Ext.decode(response.responseText);
                            console.log(out);

                            if(out.success==="true")
                                {
                                   msg("SUCCESS",out.message);
                              }
                                else
                                    {
                                        msg("FAILURE",out.message);
                                    }
                            },
                            failure: function ( result, request ) {
                                waitSave.hide();
                                var out=Ext.decode(response.responseText);
                                msg("FAILURE",out.message);
                            }



                });
    },

    init: function(application) {
        this.control({
            "#btnInsertOfficeGroup": {
                click: this.onBtnInsertOfficeGroupClick
            }
        });
    }

});
