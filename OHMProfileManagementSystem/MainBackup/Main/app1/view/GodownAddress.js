/*
 * File: app/view/GodownAddress.js
 *
 * This file was generated by Sencha Architect version 2.2.3.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.GodownAddress', {
    extend: 'Ext.window.Window',

    id: 'GodownAddress',
    itemId: 'GodownAddress',
    minHeight: 400,
    minWidth: 700,
    width: 700,
    bodyPadding: 5,
    title: 'Godown Address',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'textfield',
                    cls: 'unicode',
                    itemId: 'Excise_GodownAddr_Purpose',
                    width: 400,
                    fieldLabel: 'GODOWN PURPOSE',
                    labelWidth: 150,
                    enableKeyEvents: true,
                    enforceMaxLength: true,
                    maxLength: 300,
                    listeners: {
                        keypress: {
                            fn: me.onExcise_GodownAddr_PurposeKeypress,
                            scope: me
                        },
                        keyup: {
                            fn: me.onExcise_GodownAddr_PurposeKeyup,
                            scope: me
                        },
                        change: {
                            fn: me.onExcise_GodownAddr_PurposeChange,
                            scope: me
                        },
                        focus: {
                            fn: me.onExcise_GodownAddr_PurposeFocus,
                            scope: me
                        }
                    }
                },
                {
                    xtype: 'numberfield',
                    itemId: 'Excise_GodownAddr_FloorArea',
                    width: 400,
                    fieldLabel: 'FLOOR AREA',
                    labelWidth: 150,
                    enableKeyEvents: true,
                    enforceMaxLength: true,
                    maxLength: 30,
                    hideTrigger: true,
                    listeners: {
                        keypress: {
                            fn: me.onExcise_GodownAddr_FloorAreaKeypress,
                            scope: me
                        },
                        keyup: {
                            fn: me.onExcise_GodownAddr_FloorAreaKeyup,
                            scope: me
                        },
                        change: {
                            fn: me.onExcise_GodownAddr_FloorAreaChange,
                            scope: me
                        },
                        focus: {
                            fn: me.onExcise_GodownAddr_FloorAreaFocus,
                            scope: me
                        }
                    }
                },
                {
                    xtype: 'combobox',
                    itemId: 'Excise_GodownAddr_AddrType',
                    fieldLabel: 'Address Type ',
                    labelWidth: 150,
                    emptyText: '-- Choose --',
                    displayField: 'AddressTypeDescEn',
                    queryMode: 'local',
                    store: 'Excise_Reg_AddGodown_AddressTypeStore',
                    valueField: 'AddrsTypeID'
                },
                {
                    xtype: 'container',
                    layout: {
                        type: 'column'
                    },
                    items: [
                        {
                            xtype: 'container',
                            frame: false,
                            width: 750,
                            layout: {
                                columns: 3,
                                type: 'table'
                            },
                            items: [
                                {
                                    xtype: 'combobox',
                                    itemId: 'Excise_GodownAddr_District',
                                    margin: '2 10 2 0',
                                    maxHeight: 100,
                                    fieldLabel: 'जिल्ला',
                                    labelWidth: 150,
                                    emptyText: '-- Choose --',
                                    displayField: 'DistrictNameNp',
                                    store: 'Excise_Reg_AddGodown_cboDistrictStore',
                                    valueField: 'DistrictCode'
                                },
                                {
                                    xtype: 'radiogroup',
                                    itemId: 'Bus_Reg_T1LocationType',
                                    margin: '0 0 0 10px',
                                    width: 250,
                                    fieldLabel: '',
                                    items: [
                                        {
                                            xtype: 'radiofield',
                                            itemId: 'Excise_GodownAddr_LocationType1',
                                            name: 'T1LocationType',
                                            boxLabel: 'म.न.पा.',
                                            checked: true
                                        },
                                        {
                                            xtype: 'radiofield',
                                            itemId: 'Excise_GodownAddr_LocationType2',
                                            name: 'T1LocationType',
                                            boxLabel: 'उप-म'
                                        },
                                        {
                                            xtype: 'radiofield',
                                            itemId: 'Excise_GodownAddr_LocationType3',
                                            name: 'T1LocationType',
                                            boxLabel: 'न.पा.'
                                        },
                                        {
                                            xtype: 'radiofield',
                                            itemId: 'Excise_GodownAddr_LocationType4',
                                            name: 'T1LocationType',
                                            boxLabel: 'गा.वि.स.'
                                        }
                                    ]
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 1,
                                    cls: 'unicode',
                                    itemId: 'Excise_GodownAddr_VDC',
                                    margin: '0 0 0 10px',
                                    fieldLabel: '',
                                    labelWidth: 150,
                                    enableKeyEvents: true,
                                    enforceMaxLength: true,
                                    maxLength: 60,
                                    listeners: {
                                        keypress: {
                                            fn: me.onExcise_GodownAddr_VDCKeypress,
                                            scope: me
                                        },
                                        keyup: {
                                            fn: me.onExcise_GodownAddr_VDCKeyup,
                                            scope: me
                                        },
                                        change: {
                                            fn: me.onExcise_GodownAddr_VDCChange,
                                            scope: me
                                        },
                                        focus: {
                                            fn: me.onExcise_GodownAddr_VDCFocus,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'textfield',
                                    cls: 'unicode',
                                    itemId: 'Excise_GodownAddr_Tole',
                                    margin: '2 10 2 0',
                                    fieldLabel: 'टोल',
                                    labelWidth: 150,
                                    enableKeyEvents: true,
                                    enforceMaxLength: true,
                                    maxLength: 120,
                                    listeners: {
                                        keypress: {
                                            fn: me.onExcise_GodownAddr_ToleKeypress,
                                            scope: me
                                        },
                                        keyup: {
                                            fn: me.onExcise_GodownAddr_ToleKeyup,
                                            scope: me
                                        },
                                        change: {
                                            fn: me.onExcise_GodownAddr_ToleChange,
                                            scope: me
                                        },
                                        focus: {
                                            fn: me.onExcise_GodownAddr_ToleFocus,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    cls: 'unicode',
                                    itemId: 'Excise_GodownAddr_HouseNo',
                                    margin: '0 0 0 10px',
                                    fieldLabel: 'घर नम्बर',
                                    labelWidth: 255,
                                    enableKeyEvents: true,
                                    enforceMaxLength: true,
                                    maxLength: 20,
                                    listeners: {
                                        keypress: {
                                            fn: me.onExcise_GodownAddr_HouseNoKeypress,
                                            scope: me
                                        },
                                        keyup: {
                                            fn: me.onExcise_GodownAddr_HouseNoKeyup,
                                            scope: me
                                        },
                                        change: {
                                            fn: me.onExcise_GodownAddr_HouseNoChange,
                                            scope: me
                                        },
                                        focus: {
                                            fn: me.onExcise_GodownAddr_HouseNoFocus,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'numberfield',
                                    cls: 'unicode',
                                    itemId: 'Excise_GodownAddr_WardNo',
                                    margin: '2 10 2 0',
                                    fieldLabel: 'वडा नम्बर',
                                    labelWidth: 150,
                                    enforceMaxLength: true,
                                    maxLength: 2,
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'textfield',
                                    colspan: 2,
                                    hidden: true,
                                    itemId: 'Excise_GodownAddr_Region',
                                    margin: '0 0 0 10px',
                                    fieldLabel: 'क्षेत्र',
                                    labelWidth: 255,
                                    readOnly: true
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            width: 370,
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    itemId: 'Excise_GodownAddr_Contact',
                                    width: 352,
                                    store: 'Excise_Reg_AddGodown_Contact',
                                    columns: [
                                        {
                                            xtype: 'gridcolumn',
                                            width: 100,
                                            dataIndex: 'Key',
                                            text: 'सम्पर्क साधन'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 250,
                                            dataIndex: 'Value',
                                            text: 'बिबरण',
                                            editor: {
                                                xtype: 'textfield'
                                            }
                                        }
                                    ],
                                    plugins: [
                                        Ext.create('Ext.grid.plugin.CellEditing', {

                                        })
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'label',
                    margin: '5 0',
                    style: 'text-decoration: underline;',
                    text: 'Four Points '
                },
                {
                    xtype: 'container',
                    layout: {
                        type: 'column'
                    },
                    items: [
                        {
                            xtype: 'textfield',
                            cls: 'unicode',
                            itemId: 'Excise_GodownAddr_East',
                            margin: '12 5 0 0',
                            fieldLabel: '     East',
                            labelAlign: 'top',
                            labelSeparator: ' ',
                            labelStyle: 'text-align:center',
                            enableKeyEvents: true,
                            enforceMaxLength: true,
                            maxLength: 100,
                            listeners: {
                                keypress: {
                                    fn: me.onExcise_GodownAddr_EastKeypress,
                                    scope: me
                                },
                                keyup: {
                                    fn: me.onExcise_GodownAddr_EastKeyup,
                                    scope: me
                                },
                                change: {
                                    fn: me.onExcise_GodownAddr_EastChange,
                                    scope: me
                                },
                                focus: {
                                    fn: me.onExcise_GodownAddr_EastFocus,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'textfield',
                            cls: 'unicode',
                            itemId: 'Excise_GodownAddr_West',
                            margin: '12 5 0 0',
                            fieldLabel: 'West',
                            labelAlign: 'top',
                            labelSeparator: ' ',
                            labelStyle: 'text-align:center',
                            enableKeyEvents: true,
                            enforceMaxLength: true,
                            maxLength: 100,
                            listeners: {
                                keypress: {
                                    fn: me.onExcise_GodownAddr_WestKeypress,
                                    scope: me
                                },
                                keyup: {
                                    fn: me.onExcise_GodownAddr_WestKeyup,
                                    scope: me
                                },
                                change: {
                                    fn: me.onExcise_GodownAddr_WestChange,
                                    scope: me
                                },
                                focus: {
                                    fn: me.onExcise_GodownAddr_WestFocus,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'textfield',
                            cls: 'unicode',
                            itemId: 'Excise_GodownAddr_North',
                            margin: '12 5 0 0',
                            fieldLabel: 'North',
                            labelAlign: 'top',
                            labelSeparator: ' ',
                            labelStyle: 'text-align:center',
                            enableKeyEvents: true,
                            enforceMaxLength: true,
                            maxLength: 100,
                            listeners: {
                                keypress: {
                                    fn: me.onExcise_GodownAddr_NorthKeypress,
                                    scope: me
                                },
                                keyup: {
                                    fn: me.onExcise_GodownAddr_NorthKeyup,
                                    scope: me
                                },
                                change: {
                                    fn: me.onExcise_GodownAddr_NorthChange,
                                    scope: me
                                },
                                focus: {
                                    fn: me.onExcise_GodownAddr_NorthFocus,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'textfield',
                            cls: 'unicode',
                            itemId: 'Excise_GodownAddr_South',
                            margin: '12 5 0 0',
                            fieldLabel: 'South',
                            labelAlign: 'top',
                            labelSeparator: ' ',
                            labelStyle: 'text-align:center',
                            enableKeyEvents: true,
                            enforceMaxLength: true,
                            maxLength: 100,
                            listeners: {
                                keypress: {
                                    fn: me.onExcise_GodownAddr_SouthKeypress,
                                    scope: me
                                },
                                keyup: {
                                    fn: me.onExcise_GodownAddr_SouthKeyup,
                                    scope: me
                                },
                                change: {
                                    fn: me.onExcise_GodownAddr_SouthChange,
                                    scope: me
                                },
                                focus: {
                                    fn: me.onExcise_GodownAddr_SouthFocus,
                                    scope: me
                                }
                            }
                        }
                    ]
                },
                {
                    xtype: 'container',
                    items: [
                        {
                            xtype: 'button',
                            itemId: 'Excise_Reg_AddGodown_bnAddGdn',
                            margin: '10 0 0 0',
                            iconCls: 'btn-add',
                            text: 'Add',
                            listeners: {
                                click: {
                                    fn: me.onExcise_Reg_AddGodown_bnAddGdnClick,
                                    scope: me
                                }
                            }
                        }
                    ]
                },
                {
                    xtype: 'gridpanel',
                    itemId: 'Excise_GodownAddr_GodownList',
                    margin: '10 0 0 0 ',
                    title: 'List Of Godowns',
                    store: 'Excise_Reg_AddGodown_GDNListStore',
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'PanNo',
                            text: 'PanNo'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'SubmissionNo',
                            text: 'SubmissionNo'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'WorkPlaceNo',
                            text: 'WorkPlaceNo'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'GodownNo',
                            text: 'GodownNo'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'Purpose',
                            text: 'Purpose'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'FloorArea',
                            text: 'FloorArea'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'Action',
                            text: 'Action'
                        },
                        {
                            xtype: 'actioncolumn',
                            width: 80,
                            defaultWidth: 50,
                            flex: 1,
                            icon: '',
                            iconCls: '',
                            items: [
                                {
                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                        var grd=Ext.ComponentQuery.query('#Excise_GodownAddr_GodownList')[0];

                                        grd.getSelectionModel().select(rowIndex);

                                        var  gdnStore=grd.getStore();

                                        var gdn=gdnStore.getAt(rowIndex).data;
                                        var gdnAddress=gdn.GodownAddress;
                                        var Address=gdnAddress.Address;



                                        Ext.ComponentQuery.query('#Excise_GodownAddr_Purpose')[0].setValue(gdn.Purpose);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_FloorArea')[0].setValue(gdn.FloorArea);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_AddrType')[0].setValue("");





                                        Ext.ComponentQuery.query('#Excise_GodownAddr_District')[0].setValue(Address.DistrictCode);
                                        Ext.ComponentQuery.query('#Excise_GodownAddr_Tole')[0].setValue(Address.StreetName);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_WardNo')[0].setValue(Address.WardNo);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_VDC')[0].setValue(Address.VdcTown);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_HouseNo')[0].setValue(Address.HouseNo);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_Region')[0].setValue(Address.AreaCode);


                                        Ext.ComponentQuery.query('#Excise_GodownAddr_East')[0].setValue(gdnAddress.East);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_West')[0].setValue(gdnAddress.West);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_North')[0].setValue(gdnAddress.North);

                                        Ext.ComponentQuery.query('#Excise_GodownAddr_South')[0].setValue(gdnAddress.South);



                                        var Contact= Ext.getStore('Excise_Reg_AddGodown_Contact');


                                        Contact.getAt(3).set({Value:Address.Telephone});    
                                        //Contact.getAt(2).set({Value:Address.Telephone});
                                        Contact.getAt(1).set({Value:Address.Fax});
                                        Contact.getAt(0).set({Value:Address.Email});



                                    },
                                    icon: '../ITS/resources/images/icons/pencil.png',
                                    iconCls: '',
                                    tooltip: 'Edit Godown'
                                }
                            ]
                        },
                        {
                            xtype: 'actioncolumn',
                            width: 80,
                            defaultWidth: 50,
                            flex: 1,
                            icon: '',
                            iconCls: '',
                            items: [
                                {
                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                        Ext.Msg.confirm('Confirm Action', 'Do you want to Remove ?', function(btn) {
                                            if(btn == 'yes'){



                                                var grd =  Ext.ComponentQuery.query('#Excise_GodownAddr_GodownList')[0];
                                                var store = grd.getStore();
                                                var row = store.getAt(rowIndex).data;

                                                if(row.Action != "A")
                                                {    
                                                    row.Action = "D";
                                                    grd.bindStore(store); 

                                                    store.filter(function(item){
                                                        return item.get("Action")!= 'D';
                                                    });
                                                }
                                                else
                                                {    store.removeAt(rowIndex);            
                                                }

                                                return true;
                                            }
                                        }, this);
                                    },
                                    icon: '../ITS/resources/images/icons/cancel.png',
                                    iconCls: '',
                                    tooltip: 'Delete Godown'
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'container',
                    margin: '10 0 0 0',
                    items: [
                        {
                            xtype: 'button',
                            itemId: 'Excise_GodownAddr_btnOk',
                            icon: '../resources/ok.png',
                            text: 'Ok',
                            listeners: {
                                click: {
                                    fn: me.onExcise_GodownAddr_btnOkClick,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'button',
                            itemId: 'Excise_GodownAddr_btnCancel',
                            margin: '0 0 0 10',
                            icon: '../resources/cancel.png',
                            text: 'Cancel',
                            listeners: {
                                click: {
                                    fn: me.onExcise_GodownAddr_btnCancelClick,
                                    scope: me
                                }
                            }
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onExcise_GodownAddr_PurposeKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_PurposeKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_PurposeChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_PurposeFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_FloorAreaKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_FloorAreaKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_FloorAreaChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_FloorAreaFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_VDCKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_VDCKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_VDCChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_VDCFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_ToleKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_ToleKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_ToleChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_ToleFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_HouseNoKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_HouseNoKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_HouseNoChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_HouseNoFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_EastKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_EastKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_EastChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_EastFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_WestKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_WestKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_WestChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_WestFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_NorthKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_NorthKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_NorthChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_NorthFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_GodownAddr_SouthKeypress: function(textfield, e, eOpts) {
        return unicodeKeyPress(textfield,e, eOpts);
    },

    onExcise_GodownAddr_SouthKeyup: function(textfield, e, eOpts) {
        unicodeKeyUp(textfield,e, eOpts);
    },

    onExcise_GodownAddr_SouthChange: function(field, newValue, oldValue, eOpts) {
        unicodeChange(field, newValue, oldValue, eOpts);
    },

    onExcise_GodownAddr_SouthFocus: function(component, e, eOpts) {
        unicodeFocus(component, eOpts);
    },

    onExcise_Reg_AddGodown_bnAddGdnClick: function(button, e, eOpts) {
        var contact=Ext.getStore('Excise_Reg_AddGodown_Contact');

        var locationType="";
        if(Ext.ComponentQuery.query('#Excise_GodownAddr_LocationType1')[0].checked)
        {
            locationType="VD";
        }
        else if(Ext.ComponentQuery.query('#Excise_GodownAddr_LocationType2')[0].checked)
        {
            locationType="MN";
        }
        else if(Ext.ComponentQuery.query('#Excise_GodownAddr_LocationType3')[0].checked)
        {
            locationType="MM";
        }
        else if(Ext.ComponentQuery.query('#Excise_GodownAddr_LocationType4')[0].checked)
        {
            locationType="SM";
        }


        //var businessTyp="";
        var submissionNo="";
        var exReg=Ext.getCmp('ExciseRegistration');
        if(exReg.extraParam)   
        {
            submissionNo = exReg.extraParam.subNo;
            //  businessTyp = exReg.extraParam.busTyp;   
        }
        ////////
        //var wpListStore=Ext.getStore('Excise_Reg_AddGodown_GDNListStore');


        var floorArea=Ext.ComponentQuery.query('#Excise_GodownAddr_FloorArea')[0].getValue();
        var purpose=Ext.ComponentQuery.query('#Excise_GodownAddr_Purpose')[0].getValue();

        var east=Ext.ComponentQuery.query('#Excise_GodownAddr_East')[0].getValue();
        var west=Ext.ComponentQuery.query('#Excise_GodownAddr_West')[0].getValue();
        var north=Ext.ComponentQuery.query('#Excise_GodownAddr_North')[0].getValue();
        var south=Ext.ComponentQuery.query('#Excise_GodownAddr_South')[0].getValue();

        /////////

        var selection=Ext.ComponentQuery.query('#Excise_GodownAddr_GodownList')[0].getSelectionModel().getSelection();
        var gdnStore=Ext.getStore('Excise_Reg_AddGodown_GDNListStore');
        if(selection.length>0)
        { 
            var selectedIndex= gdnStore.indexOf( selection[0] );

            var godown1=gdnStore.getAt(selectedIndex).data;

            var godownAddress1=godown1.GodownAddress;
            var address1=godownAddress1.Address;      


            address1.HouseNo=Ext.ComponentQuery.query('#Excise_GodownAddr_HouseNo')[0].getValue();
            address1.WardNo=Ext.ComponentQuery.query('#Excise_GodownAddr_WardNo')[0].getValue()?Ext.ComponentQuery.query('#Excise_GodownAddr_WardNo')[0].getValue():null;
            address1.StreetName=Ext.ComponentQuery.query('#Excise_GodownAddr_Tole')[0].getValue();
            address1.VdcTown=Ext.ComponentQuery.query('#Excise_GodownAddr_VDC')[0].getValue();
            address1.LocationType=locationType;
            address1.DistrictCode=Ext.ComponentQuery.query('#Excise_GodownAddr_District')[0].getValue(); 
            address1.Telephone=contact.getAt(3).data.Value;
            address1.AreaCode='00';
            address1.Fax=contact.getAt(1).data.Value;
            address1.Email=contact.getAt(0).data.Value;
            address1.PoBox=null;
            address1.ExpiryDate=null;
            address1.UserId='ITS';
            address1.TranDate=null;    
            address1.TranNo=null;        
            address1.Action=address1.Action=="A"?"A":'E';       

            godownAddress1.East=east;
            godownAddress1.West=west;
            godownAddress1.North=north;
            godownAddress1.South=south;
            godownAddress1.Action=godownAddress1.Action=="A"?"A":'E';
            godownAddress1.Address=address1;   

            godown1.FloorArea=floorArea;
            godown1.Purpose=purpose;
            godown1.Action=godown1.Action=="A"?"A":'E';  
            godown1.GodownAddress=godownAddress1;        

            gdnStore.removeAt(selectedIndex);
            gdnStore.insert(selectedIndex,godown1);

        }
        else
        {       
            var address={
                AddressSNO:0, 
                HouseNo:Ext.ComponentQuery.query('#Excise_GodownAddr_HouseNo')[0].getValue(),
                WardNo:Ext.ComponentQuery.query('#Excise_GodownAddr_WardNo')[0].getValue()?Ext.ComponentQuery.query('#Excise_GodownAddr_WardNo')[0].getValue():null,
                StreetName:Ext.ComponentQuery.query('#Excise_GodownAddr_Tole')[0].getValue(),
                VdcTown:Ext.ComponentQuery.query('#Excise_GodownAddr_VDC')[0].getValue(),
                LocationType:locationType,
                DistrictCode:Ext.ComponentQuery.query('#Excise_GodownAddr_District')[0].getValue(), 
                Telephone:contact.getAt(3).data.Value,
                AreaCode:'00',
                Fax:contact.getAt(1).data.Value,
                Email:contact.getAt(0).data.Value,
                PoBox:null,
                ExpiryDate:null,
                UserId:'ITS',  //not Null field
                TranDate:null,    
                TranNo:null,
                submissionNo:submissionNo,
                Action:'A'
            };

            var godownAddress={
                PanNo:'',
                SubmissionNo:submissionNo,
                WorkPlaceNo:0,
                GodownNo:0,
                AddressSno:0,
                East:east,
                West:west,
                North:north,
                South:south,
                Action:'A',
                Address:address

            };

            var godown={
                PanNo:'',
                SubmissionNo:submissionNo,
                WorkPlaceNo:0,
                GodownNo:0,
                Purpose:purpose,
                FloorArea:floorArea,
                Action:'A',
                GodownAddress:godownAddress
            };


            gdnStore.add(godown);

        }

        console.log('gdnStore',gdnStore);
    },

    onExcise_GodownAddr_btnOkClick: function(button, e, eOpts) {
        var win=Ext.getCmp('GodownAddress');
        var rowIndex=win.index;  


        var source =  Ext.getStore('Excise_Reg_AddGodown_GDNListStore');

        source.clearFilter();

        var gdnData=getJson(source);

        source.filter(function(rec){
            return rec.get("Action")!= 'D';
        }); 


        var store = Ext.getStore('Excise_Reg_AddWP_WPListStore');
        var row = store.getAt(rowIndex).data;

        row.Action=row.Action=="A"?"A":"E";
        row.Godowns=gdnData;


        store.removeAt(rowIndex);
        store.insert(rowIndex,row);
        win.close();

    },

    onExcise_GodownAddr_btnCancelClick: function(button, e, eOpts) {
        Ext.Msg.confirm('Confirm Action', 'Do you want to Cancel ?', function(btn) {
            if(btn == 'yes'){
                Ext.ComponentQuery.query('#GodownAddress')[0].close();
                return true;
            }
        }, this);
    }

});