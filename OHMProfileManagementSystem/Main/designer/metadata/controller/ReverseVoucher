{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "ReverseVoucher",
        "stores": [
            "RecVoucParticularStore",
            "ReserveVoucherDetailsStore"
        ]
    },
    "configAlternates": {
        "designer|userClassName": "string",
        "stores": "typedarray"
    },
    "name": "MyController2",
    "designerId": "b6d97484-15e0-4e2f-9f94-6aa3935f04cd",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#frmReverseVoucher",
                "designer|params": [
                    "component",
                    "eOpts"
                ],
                "designer|targetType": "ReverseVoucher",
                "fn": "onFrmReverseVoucherAfterRender",
                "implHandler": [
                    "Ext.ComponentQuery.query('#txtTransactionDateBS')[0].setValue(getMisDateBS());",
                    "Ext.ComponentQuery.query('#txtTransactionDateAD')[0].setValue(getMisDateAD());",
                    "",
                    "var storeRecVoucParticular =Ext.getStore('RecVoucParticularStore');",
                    "getParticularsLov('',function(data){",
                    "    storeRecVoucParticular.removeAll();",
                    "    storeRecVoucParticular.add(data.root);",
                    "});",
                    "",
                    "",
                    ""
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "name": "string",
                "scope": "string",
                "designer|controlQuery": "string",
                "designer|params": "typedarray",
                "designer|targetType": "view",
                "implHandler": "code"
            },
            "name": "onFrmReverseVoucherAfterRender",
            "designerId": "b7d8bbe4-3b84-4d4c-b283-29f00e2419b2"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnViewVoucherDetails",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "MyButton3",
                "fn": "onBtnViewVoucherDetailsClick",
                "implHandler": [
                    "var rvoucherNo=Ext.ComponentQuery.query('#ddlReserveVoucher')[0].getValue();",
                    "",
                    "Ext.Ajax.request({",
                    "              url: '../Handlers/Finance/AccountTransaction/ReverseVoucherDetailDetailHandler.ashx',",
                    "              params: {",
                    "                  method:'GetReverseVoucherDtlDetail',",
                    "                  VoucherNo:'J00010207110'",
                    "",
                    "              },",
                    "              success: function(response){",
                    "                  var data=Ext.decode(response.responseText);",
                    "                  var reserveVoucherDetailsStore=Ext.getStore('ReserveVoucherDetailsStore');",
                    "                  reserveVoucherDetailsStore.removeAll();",
                    "                  reserveVoucherDetailsStore.add(data.root);",
                    "              }",
                    "          });",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "name": "string",
                "scope": "string",
                "designer|controlQuery": "string",
                "designer|params": "typedarray",
                "designer|targetType": "view",
                "implHandler": "code"
            },
            "name": "onBtnViewVoucherDetailsClick",
            "designerId": "7529ba25-3624-4b4a-8746-981fa9d14d2c"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnReserveGivenVoucher",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "MyButton4",
                "fn": "onBtnReserveGivenVoucherClick",
                "implHandler": [
                    "//ReceiveVoucherDetails",
                    "var grdRecVouDetails = Ext.ComponentQuery.query('#grdRecVouDetails')[0];",
                    "var storeVoucherDetailsRecStore = Ext.getStore('VoucherDetailsRecStore');",
                    "var selectionT = grdRecVouDetails.getSelectionModel().getSelection()[0];",
                    "var selectedIndxT= grdRecVouDetails.getStore().indexOf(selectionT);",
                    "var utStore1 =grdRecVouDetails.getStore();",
                    "var crAmount=utStore1.getAt(selectedIndxT).data.CrAmount;",
                    "",
                    "var p_FiscalYear = Ext.ComponentQuery.query('#txtFiscalYear')[0];",
                    "var p_TransactionDate = Ext.ComponentQuery.query('#txtTransactionDateBS')[0];",
                    "var p_Particulars = Ext.ComponentQuery.query('#ddlParticulars')[0];",
                    "var p_ModifiedFlag = 'N';",
                    "var p_AuditedFlag = 'N';",
                    "var p_AuditedDate = null;",
                    "var p_AuditedBy = null;",
                    "var p_Remarks = Ext.ComponentQuery.query('#txtRemarks')[0];",
                    "var p_ApprovedNo = null;",
                    "var p_ApprovedFlag = 'N';",
                    "var p_PostedYN = 'N';",
                    "var p_ReferenceNo =null;",
                    "var p_CreatedBy = Ext.get('user').dom.innerHTML;",
                    "var p_CreatedOn = Ext.get('date').dom.innerHTML;",
                    "var p_TranOfficeCode = Ext.get('offCode').dom.innerHTML;",
                    "var p_VoucherType ='R';",
                    "var p_CloseFlag = 'N';",
                    "var p_VoucherNoAgainst =null;",
                    "var p_ChequeBillNo = null;",
                    "var p_VoucherNoReference =null;",
                    "var p_VoucherSeqNo = '';",
                    "var p_ApprovedDate = null;",
                    "var p_ApprovedDateBs = null;",
                    "var p_ApprovedBy = utStore.getAt(selectedIndxT).data.ApprovedBy===null?null:utStore.getAt(selectedIndxT).data.ApprovedBy;",
                    "var p_TotalDrAmount = Ext.ComponentQuery.query('#TotalDrAmount')[0];",
                    "var p_InsertUpdate = Ext.ComponentQuery.query('#InsertUpdate')[0];",
                    "var p_OutVoucherNo = Ext.ComponentQuery.query('#txtVoucherNo')[0];",
                    "var p_OutHistSeq_No = Ext.ComponentQuery.query('#OutHistSeq_No')[0];",
                    "",
                    "",
                    "",
                    "var glTransactionDetail=",
                    "    {",
                    "        voucherNo:'',",
                    "        TransactionDate:p_TransactionDate.getValue(),",
                    "        TransactionId:TransactionId,",
                    "        TranOfficeCode:TranOfficeCode,",
                    "        AccountCode:AccountCode,",
                    "        Particulars:p_Particulars.getValue(),",
                    "        Amount:utStore.getAt(selectedIndxT).data.Amount===null?null:utStore.getAt(selectedIndxT).data.Amount,",
                    "        DrCrFlag:'',",
                    "        Remarks:p_Remarks.getValue(),",
                    "        CurrencyCode:'',",
                    "        TranType:'',",
                    "        DmlType:''",
                    "    };",
                    "var objglTransactionMaster ={",
                    "                FiscalYear : p_FiscalYear.getValue(),",
                    "                TransactionDate : p_TransactionDate.getValue(),",
                    "                Particulars : p_Particulars.getValue(),",
                    "                ModifiedFlag : p_ModifiedFlag.getValue(),",
                    "                AuditedFlag : p_AuditedFlag.getValue(),",
                    "                AuditedDate : p_AuditedDate.getValue(),",
                    "                AuditedBy : p_AuditedBy.getValue(),",
                    "                Remarks : p_Remarks.getValue(),",
                    "                ApprovedNo : p_ApprovedNo,",
                    "                ApprovedFlag : p_ApprovedFlag,",
                    "                PostedYN : p_PostedYN.getValue(),",
                    "                ReferenceNo : p_ReferenceNo.getValue(),",
                    "                CreatedBy : p_CreatedBy,",
                    "                CreatedOn : p_CreatedOn,",
                    "                TranOfficeCode : p_TranOfficeCode,",
                    "                VoucherType : p_VoucherType.getValue(),",
                    "                CloseFlag : p_CloseFlag.getValue(),",
                    "                VoucherNoAgainst : p_VoucherNoAgainst.getValue(),",
                    "                ChequeBillNo : p_ChequeBillNo,",
                    "                VoucherNoReference : p_VoucherNoReference.getValue(),",
                    "                VoucherSeqNo : p_VoucherSeqNo.getValue(),",
                    "                ApprovedDate : p_ApprovedDate,",
                    "                ApprovedDateBs : p_ApprovedDateBs,",
                    "                ApprovedBy : p_ApprovedBy,",
                    "                TotalDrAmount : p_TotalDrAmount.getValue(),",
                    "                InsertUpdate : 'A',",
                    "                OutVoucherNo : p_OutVoucherNo.getValue(),",
                    "                OutHistSeq_No : '',",
                    "                GlTransactionDetail:glTransactionDetail",
                    "};",
                    "",
                    "//start Code for Save",
                    "var waitSave = watiMsg('Please wait ...');",
                    "Ext.Ajax.request({",
                    "     url:'../Handlers/Finance/AccountTransaction/GlTransactionMasterHandler.ashx',",
                    "     params:{method:'SaveGlTransactionMaster',glTransactionMaster:JSON.stringify(objglTransactionMaster)},",
                    "     success: function ( result, request ) {",
                    "waitSave.hide();",
                    "          var obj = Ext.decode(result.responseText);",
                    "          if(obj.success === 'true'){",
                    " msg('SUCCESS',out.message,function(){",
                    "var grd = Ext.ComponentQuery.query('#grdGlTransactionMaster')[0];",
                    "var record = grd.getSelectionModel().getSelection()[0];",
                    "record.set('Action','U');",
                    "});",
                    "}",
                    "          else{msg('FAILURE',out.message);",
                    "",
                    "",
                    "          }",
                    "     },",
                    "     failure: function(form, action) {",
                    "waitSave.hide();",
                    "var out=Ext.decode(response.responseText);",
                    "msg('FAILURE',out.message);     }",
                    "});",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "name": "string",
                "scope": "string",
                "designer|controlQuery": "string",
                "designer|params": "typedarray",
                "designer|targetType": "view",
                "implHandler": "code"
            },
            "name": "onBtnReserveGivenVoucherClick",
            "designerId": "7daa89b2-b009-4577-affe-6e029c8e4df3"
        }
    ]
}