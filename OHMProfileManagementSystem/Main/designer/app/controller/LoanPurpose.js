/*
 * File: app/controller/LoanPurpose.js
 *
 * This file was generated by Sencha Architect version 4.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.LoanPurpose', {
    extend: 'Ext.app.Controller',

    stores: [
        'LoanProductPurposeStore',
        'LoanSectorStore',
        'LoanSubSectorStore',
        'LoanPurposeStore'
    ],

    onFrmLoanPurposeAfterRender: function(component, eOpts) {
         var store=Ext.getStore('LoanSectorStore');
        store.removeAll();

                Ext.Ajax.request({
                    url: '../Handlers/Finance/Maintenance/LoanSectorHandler.ashx',
                    params: {
                        method:'GetLoanSector'
                    },
                    success: function(response){

                    var data=Ext.decode(response.responseText);
                    store.removeAll();
                    store.add(data.root);


                }
                });
    },

    onBtnAddSectorClick: function(button, e, eOpts) {
         var store =Ext.getStore('LoanSectorStore');
                        var rec={
                            LoanSectorCode:'',
                            LoanSectorDesc:'',
                            Action:'I'
                        };
                        store.add(rec);

    },

    onBtnLoanSubSectorClick: function(button, e, eOpts) {
         var store =Ext.getStore('LoanSubSectorStore');
                        var rec={
                            LoanSubSectorCode:'',
                            LoanSubSectorDesc:'',
                             LoanSectorCode:'',
                            LoanSectorDesc:'',
                            Action:'I'
                        };
                        store.add(rec);

    },

    onBtnLoanPurposeClick: function(button, e, eOpts) {
         var store =Ext.getStore('LoanPurposeStore');
                        var rec={
                            LoanPurposeCode:'',
                            LoanPurposeDesc:'',
                            SubSectorCode:'',
                            SubSectorDesc:'',
                            Action:'I'
                        };
                        store.add(rec);

    },

    onBtnProductPurposeClick: function(button, e, eOpts) {
         var store =Ext.getStore('LoanProductPurposeStore');
                                var rec={
                                    LoanPurposeCode:'',
                                    LoanPurposeDesc:'',
                                    LoanProductCode:'',
                                    InterestRate:'',
                                    MinLoanAmount:'',
                                    MaxLoanAmount:'',
                                    MinLoanTermsMonths:'',
                                    MaxLoanTermsMonths:'',
                                    Action:'I'
                                };
                                store.add(rec);

    },

    init: function(application) {
        this.control({
            "#frmLoanPurpose": {
                afterrender: this.onFrmLoanPurposeAfterRender
            },
            "#btnAddSector": {
                click: this.onBtnAddSectorClick
            },
            "#btnLoanSubSector": {
                click: this.onBtnLoanSubSectorClick
            },
            "#btnLoanPurpose": {
                click: this.onBtnLoanPurposeClick
            },
            "#btnProductPurpose": {
                click: this.onBtnProductPurposeClick
            }
        });
    }

});
