/*
 * File: app/view/DocumentReg.js
 *
 * This file was generated by Sencha Architect version 2.2.3.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.DocumentReg', {
    extend: 'Ext.panel.Panel',

    frame: true,
    height: 1039,
    itemId: 'DocumentReg',
    width: 916,
    title: 'Document Registration',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    frame: true,
                    height: 1008,
                    id: 'DocumentReg',
                    itemId: 'DocumentReg',
                    width: 900,
                    bodyPadding: 10,
                    title: '',
                    items: [
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            id: 'txtPanDocReg',
                            itemId: 'txtPanDocReg',
                            maxWidth: 300,
                            minWidth: 300,
                            width: 300,
                            fieldLabel: 'PAN',
                            allowBlank: false,
                            enableKeyEvents: true,
                            enforceMaxLength: true,
                            maxLength: 9,
                            maxLengthText: 'तपाईको PAN मिलेन, कृपया सहि PAN टाईप गर्नुहोस ।',
                            minLength: 9,
                            minLengthText: 'तपाईको PAN मिलेन ,कृपया सहि PAN टाईप गर्नुहोस ।',
                            hideTrigger: true,
                            allowDecimals: false,
                            listeners: {
                                blur: {
                                    fn: me.onTxtPanDocRegBlur,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'textfield',
                            anchor: '100%',
                            itemId: 'txtNameReg',
                            maxWidth: 400,
                            width: 400,
                            fieldLabel: 'Name',
                            readOnly: true
                        },
                        {
                            xtype: 'textfield',
                            anchor: '100%',
                            id: 'txtSubject',
                            itemId: 'txtSubject',
                            fieldLabel: 'Subject'
                        },
                        {
                            xtype: 'textareafield',
                            anchor: '100%',
                            height: 39,
                            id: 'txtSummary',
                            itemId: 'txtSummary',
                            fieldLabel: 'Summary'
                        },
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            id: 'cmbOffSection',
                            itemId: 'cmbOffSection',
                            maxWidth: 400,
                            minWidth: 50,
                            width: 870,
                            fieldLabel: 'Section',
                            displayField: 'SEC_DESC',
                            forceSelection: true,
                            queryMode: 'local',
                            store: 'DocRegOfficeSecStore',
                            valueField: 'SEC_ID'
                        },
                        {
                            xtype: 'fieldcontainer',
                            height: 30,
                            layout: {
                                align: 'stretch',
                                type: 'hbox'
                            },
                            fieldLabel: 'Status',
                            items: [
                                {
                                    xtype: 'radiofield',
                                    handler: function(checkbox, checked) {
                                        var chCl=Ext.ComponentQuery.query('#rdClassify')[0];
                                        var chJrd=Ext.ComponentQuery.query('#rdJurisdiction')[0];
                                        var tabUser=Ext.ComponentQuery.query('#tabPanelUsersRole')[0];
                                        var tabKeyword=Ext.ComponentQuery.query('#tbPanelKeyword')[0];

                                        var UserToStore = Ext.getStore('DocRegUserToStore');
                                        var RoleToStore = Ext.getStore('DocRegRoleToStore');


                                        if(checked)
                                        {     
                                            chCl.setValue(false);
                                            chJrd.setValue(false);
                                            tabUser.setVisible(false);
                                            tabKeyword.setVisible(true);
                                            UserToStore.loadData([],false);
                                            RoleToStore.loadData([],false);    
                                            Ext.ComponentQuery.query('#hdnRadio')[0].setValue('O');
                                        }


                                    },
                                    id: 'rdOpen',
                                    itemId: 'rdOpen',
                                    name: 'Open',
                                    boxLabel: 'Open',
                                    checked: true,
                                    inputValue: '1'
                                },
                                {
                                    xtype: 'radiofield',
                                    handler: function(checkbox, checked) {
                                        var chOl=Ext.ComponentQuery.query('#rdOpen')[0];
                                        var tabUser=Ext.ComponentQuery.query('#tabPanelUsersRole')[0];
                                        var tabKeyword=Ext.ComponentQuery.query('#tbPanelKeyword')[0];

                                        var gridToUsers=Ext.ComponentQuery.query('#grdUserTo')[0];
                                        var gridToRole=Ext.ComponentQuery.query('#grdRoleTo')[0];





                                        if(checked)
                                        {     
                                            chOl.setValue(false);   
                                            tabUser.setVisible(false);
                                            Ext.ComponentQuery.query('#hdnRadio')[0].setValue('J');
                                            gridToUsers.store.loadData([],false);
                                            gridToRole.store.loadData([],false);


                                        }
                                    },
                                    id: 'rdJurisdiction',
                                    itemId: 'rdJurisdiction',
                                    margin: '0 0 0 100',
                                    name: 'Classify',
                                    boxLabel: 'Jurisdiction',
                                    inputValue: '2'
                                },
                                {
                                    xtype: 'radiofield',
                                    handler: function(checkbox, checked) {
                                        var chOl=Ext.ComponentQuery.query('#rdOpen')[0];
                                        var chJrd=Ext.ComponentQuery.query('#rdJurisdiction')[0];
                                        var tabUser=Ext.ComponentQuery.query('#tabPanelUsersRole')[0];
                                        var tabKeyword=Ext.ComponentQuery.query('#tbPanelKeyword')[0];
                                        if(checked)
                                        {   
                                            chJrd.setValue(false);
                                            chOl.setValue(false);
                                            //tabKeyword.setVisible(false);
                                            tabUser.setVisible(true);
                                            Ext.ComponentQuery.query('#hdnRadio')[0].setValue('C');

                                        }
                                    },
                                    id: 'rdClassify',
                                    itemId: 'rdClassify',
                                    margin: '0 0 0 100',
                                    name: 'Classify',
                                    boxLabel: 'Classify',
                                    inputValue: '2'
                                }
                            ]
                        },
                        {
                            xtype: 'container',
                            height: 538,
                            id: 'contTab',
                            itemId: 'contTab',
                            items: [
                                {
                                    xtype: 'tabpanel',
                                    height: 259,
                                    id: 'tabPanelUsersRole',
                                    itemId: 'tabPanelUsersRole',
                                    detachOnRemove: false,
                                    collapsible: true,
                                    hideCollapseTool: true,
                                    activeTab: 0,
                                    items: [
                                        {
                                            xtype: 'panel',
                                            frame: true,
                                            height: 257,
                                            title: 'Users',
                                            items: [
                                                {
                                                    xtype: 'container',
                                                    height: 214,
                                                    width: 840,
                                                    layout: {
                                                        align: 'stretch',
                                                        type: 'hbox'
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'form',
                                                            flex: 1,
                                                            height: 214,
                                                            autoScroll: true,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'gridpanel',
                                                                    height: 199,
                                                                    id: 'grdUsers',
                                                                    itemId: 'grdUsers',
                                                                    autoScroll: true,
                                                                    title: '',
                                                                    store: 'DocRegUserStore',
                                                                    columns: [
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            width: 385,
                                                                            dataIndex: 'UserID',
                                                                            text: 'UserID'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'FromDate',
                                                                            text: 'FromDate'
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'container',
                                                            autoRender: false,
                                                            margin: '40 0 0 0',
                                                            styleHtmlContent: true,
                                                            width: 53,
                                                            items: [
                                                                {
                                                                    xtype: 'button',
                                                                    itemId: 'btnForwardUser',
                                                                    width: 54,
                                                                    iconAlign: 'top',
                                                                    text: '>>'
                                                                },
                                                                {
                                                                    xtype: 'button',
                                                                    itemId: 'btnBackwardUser',
                                                                    width: 57,
                                                                    iconAlign: 'top',
                                                                    text: '<<'
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'form',
                                                            flex: 1,
                                                            autoScroll: true,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'gridpanel',
                                                                    id: 'grdUserTo',
                                                                    itemId: 'grdUserTo',
                                                                    autoScroll: true,
                                                                    title: '',
                                                                    store: 'DocRegUserToStore',
                                                                    columns: [
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            width: 385,
                                                                            dataIndex: 'UserID',
                                                                            text: 'UserID'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'FromDate',
                                                                            text: 'FromDate'
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'panel',
                                            frame: true,
                                            height: 257,
                                            title: 'Roles',
                                            items: [
                                                {
                                                    xtype: 'container',
                                                    height: 214,
                                                    width: 840,
                                                    layout: {
                                                        align: 'stretch',
                                                        type: 'hbox'
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'form',
                                                            flex: 1,
                                                            height: 214,
                                                            autoScroll: true,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'gridpanel',
                                                                    id: 'grdRole',
                                                                    itemId: 'grdRole',
                                                                    autoScroll: true,
                                                                    title: '',
                                                                    store: 'DocRegRoleStore',
                                                                    columns: [
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            width: 366,
                                                                            dataIndex: 'RoleID',
                                                                            text: 'RoleID'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'ApplicationID',
                                                                            text: 'ApplicationID'
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'container',
                                                            autoRender: false,
                                                            margin: '80 0 0 0',
                                                            styleHtmlContent: true,
                                                            width: 53,
                                                            items: [
                                                                {
                                                                    xtype: 'button',
                                                                    id: 'btnForwardRole',
                                                                    itemId: 'btnForwardRole',
                                                                    width: 54,
                                                                    iconAlign: 'top',
                                                                    text: '>>'
                                                                },
                                                                {
                                                                    xtype: 'button',
                                                                    id: 'btnBackwardRole',
                                                                    itemId: 'btnBackwardRole',
                                                                    width: 57,
                                                                    iconAlign: 'top',
                                                                    text: '<<'
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'form',
                                                            flex: 1,
                                                            autoScroll: true,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'gridpanel',
                                                                    id: 'grdRoleTo',
                                                                    itemId: 'grdRoleTo',
                                                                    autoScroll: true,
                                                                    title: '',
                                                                    store: 'DocRegRoleToStore',
                                                                    columns: [
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            width: 367,
                                                                            dataIndex: 'RoleID',
                                                                            text: 'RoleID'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'ApplicationID',
                                                                            text: 'ApplicationID'
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'tabpanel',
                                    height: 259,
                                    id: 'tbPanelKeyword',
                                    itemId: 'tbPanelKeyword',
                                    detachOnRemove: false,
                                    collapsible: true,
                                    hideCollapseTool: true,
                                    activeTab: 0,
                                    items: [
                                        {
                                            xtype: 'panel',
                                            frame: true,
                                            height: 257,
                                            title: 'Keywords',
                                            items: [
                                                {
                                                    xtype: 'container',
                                                    height: 214,
                                                    width: 840,
                                                    layout: {
                                                        align: 'stretch',
                                                        type: 'hbox'
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'form',
                                                            flex: 1,
                                                            height: 214,
                                                            autoScroll: true,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'gridpanel',
                                                                    height: 199,
                                                                    id: 'grdKeyword',
                                                                    itemId: 'grdKeyword',
                                                                    autoScroll: true,
                                                                    title: '',
                                                                    store: 'DocRegKeywordStore',
                                                                    columns: [
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'KW_Id',
                                                                            text: 'KW_Id'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            width: 360,
                                                                            dataIndex: 'Keyword',
                                                                            text: 'Keywords'
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'container',
                                                            autoRender: false,
                                                            margin: '40 0 0 0',
                                                            styleHtmlContent: true,
                                                            width: 78,
                                                            items: [
                                                                {
                                                                    xtype: 'button',
                                                                    frame: false,
                                                                    height: 50,
                                                                    id: 'btnAddKeyword',
                                                                    itemId: 'btnAddKeyword',
                                                                    maxHeight: 50,
                                                                    allowDepress: false,
                                                                    text: 'Add Keyword'
                                                                },
                                                                {
                                                                    xtype: 'button',
                                                                    itemId: 'btnForwardKeyword',
                                                                    iconAlign: 'top',
                                                                    text: '>>'
                                                                },
                                                                {
                                                                    xtype: 'button',
                                                                    itemId: 'btnBackrwardKeyword',
                                                                    iconAlign: 'top',
                                                                    text: '<<'
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'form',
                                                            flex: 1,
                                                            autoScroll: true,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'gridpanel',
                                                                    id: 'grdKeywordTo',
                                                                    itemId: 'grdKeywordTo',
                                                                    autoScroll: true,
                                                                    title: '',
                                                                    store: 'DocRegKeywordToStore',
                                                                    columns: [
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'KW_Id',
                                                                            text: 'KW_Id'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            width: 375,
                                                                            dataIndex: 'Keyword',
                                                                            text: 'Keywords'
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'tabpanel',
                                    frame: true,
                                    height: 277,
                                    id: 'tbPanelFiles',
                                    itemId: 'tbPanelFiles',
                                    detachOnRemove: false,
                                    activeTab: 0,
                                    items: [
                                        {
                                            xtype: 'panel',
                                            frame: true,
                                            height: 241,
                                            width: 860,
                                            title: 'Files',
                                            items: [
                                                {
                                                    xtype: 'container',
                                                    frame: true,
                                                    height: 38,
                                                    layout: {
                                                        align: 'stretch',
                                                        type: 'hbox'
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'textfield',
                                                            id: 'txtFileName',
                                                            itemId: 'txtFileName',
                                                            width: 668,
                                                            fieldLabel: 'File Name'
                                                        },
                                                        {
                                                            xtype: 'form',
                                                            flex: 1,
                                                            frame: true,
                                                            height: 27,
                                                            id: 'DocFormFile',
                                                            itemId: 'DocFormFile',
                                                            maxWidth: 80,
                                                            minWidth: 80,
                                                            width: 80,
                                                            bodyPadding: 10,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'filefield',
                                                                    itemId: 'btnFileUpload',
                                                                    width: 706,
                                                                    fieldLabel: '',
                                                                    buttonOnly: true
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'button',
                                                            id: 'btnAddFile',
                                                            itemId: 'btnAddFile',
                                                            margin: '0 0 0 10 ',
                                                            width: 82,
                                                            iconCls: 'icon-add',
                                                            text: 'AddFile'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'container',
                                                    frame: true,
                                                    height: 162,
                                                    itemId: 'contFiles',
                                                    items: [
                                                        {
                                                            xtype: 'form',
                                                            height: 156,
                                                            width: 852,
                                                            autoScroll: true,
                                                            bodyPadding: 10,
                                                            title: '',
                                                            items: [
                                                                {
                                                                    xtype: 'gridpanel',
                                                                    itemId: 'grdFile',
                                                                    title: 'Files',
                                                                    store: 'DocRegFileStore',
                                                                    columns: [
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            width: 705,
                                                                            dataIndex: 'FileName',
                                                                            text: 'FileName'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'FileType',
                                                                            text: 'FileType'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'File',
                                                                            text: 'File'
                                                                        },
                                                                        {
                                                                            xtype: 'gridcolumn',
                                                                            hidden: true,
                                                                            dataIndex: 'DocNameUnique',
                                                                            text: 'DocNameUnique'
                                                                        },
                                                                        {
                                                                            xtype: 'actioncolumn',
                                                                            width: 123,
                                                                            menuText: 'Delete',
                                                                            tooltip: 'Delete button to delete file from list',
                                                                            items: [
                                                                                {
                                                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                                                        var FileStore = Ext.getStore('DocRegFileStore');

                                                                                        FileStore.removeAt(rowIndex);

                                                                                    },
                                                                                    icon: '../ITS/resources/images/icons/cancel.png'
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'container',
                                                    frame: true,
                                                    height: 36,
                                                    itemId: 'contSubmit',
                                                    margin: '0 0 0 400',
                                                    width: 314,
                                                    items: [
                                                        {
                                                            xtype: 'button',
                                                            height: 32,
                                                            itemId: 'btnSubmit',
                                                            width: 75,
                                                            iconCls: 'icon-save',
                                                            text: 'Submit'
                                                        },
                                                        {
                                                            xtype: 'button',
                                                            height: 31,
                                                            itemId: 'btnCancel',
                                                            margin: '0 0 0 15',
                                                            width: 82,
                                                            iconCls: 'icon-cancel',
                                                            text: 'Cancel'
                                                        },
                                                        {
                                                            xtype: 'button',
                                                            height: 33,
                                                            hidden: true,
                                                            id: 'btnImagView',
                                                            itemId: 'btnImagView',
                                                            margin: '0 0 0 15',
                                                            width: 81,
                                                            text: 'View'
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'hiddenfield',
                    itemId: 'hdnSelectedIndex',
                    fieldLabel: 'Label'
                },
                {
                    xtype: 'hiddenfield',
                    itemId: 'hdnRadio',
                    fieldLabel: 'Label'
                }
            ]
        });

        me.callParent(arguments);
    },

    onTxtPanDocRegBlur: function(component, e, eOpts) {

        var textfield = Ext.ComponentQuery.query('#txtPanDocReg')[0];
        //-------------------------------------------------------------------------
        // NB: Loading details using PAN and ACCOUNT-TYPE i.e. for Submission Login
        //-------------------------------------------------------------------------
        LoadTaxpayerInfoWithValidPan(textfield.getValue(),"10",function(data){

            var name = Ext.ComponentQuery.query('#txtNameReg')[0];
            var rec = data.root.Taxpayer;

            name.setValue(rec.Name);

            //alert("name >>" + name.getValue());
        });
    }

});